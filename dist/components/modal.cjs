"use strict";const e=require("./shorty-1329a513.cjs"),f=require("./event-listener-2a5f29ed.cjs"),B=require("./dataBsToggle-c8bc9e7f.cjs"),L=require("./dataBsDismiss-4ee313a7.cjs"),W=require("./fadeClass-a4944cf1.cjs"),l=require("./showClass-2174a6d6.cjs"),d=require("./offcanvasString-90a219fe.cjs"),S=require("./offcanvasComponent-82813e15.cjs"),$=require("./getTargetElement-379ad550.cjs"),b=require("./scrollbar.cjs"),r=require("./backdrop.cjs"),x=require("./isVisible.cjs"),z=require("./base-component.cjs"),A=require("./popupContainer.cjs"),G=`.${d.modalString}`,D=`[${B.dataBsToggle}="${d.modalString}"]`,I=`[${L.dataBsDismiss}="${d.modalString}"]`,E=`${d.modalString}-static`,Q={backdrop:!0,keyboard:!0},m=o=>e.Ln(o,S.modalComponent),N=o=>new F(o),p=e.Wn(`show.bs.${d.modalString}`),w=e.Wn(`shown.bs.${d.modalString}`),v=e.Wn(`hide.bs.${d.modalString}`),C=e.Wn(`hidden.bs.${d.modalString}`),H=o=>{const{element:t}=o,s=b.measureScrollbar(t),{clientHeight:n,scrollHeight:a}=e.k(t),{clientHeight:c,scrollHeight:g}=t,i=c!==g;if(!i&&s){const h=e.po(t)?"paddingLeft":"paddingRight",u={};u[h]=`${s}px`,e.qn(t,u)}b.setScrollbar(t,i||n!==a)},O=(o,t)=>{const s=t?f.E:f.r,{element:n}=o;s(n,e.ut,j),s(e.$n(n),e.Lt,o.update,e.Rn),s(e.d(n),e.ct,R)},T=(o,t)=>{const s=t?f.E:f.r,{triggers:n}=o;n.length&&n.forEach(a=>s(a,e.ut,P))},y=(o,t)=>{const{triggers:s,element:n,relatedTarget:a}=o;r.removeOverlay(n),e.qn(n,{paddingRight:"",display:""}),O(o);const c=p.relatedTarget||s.find(x);c&&e.Bn(c),e.so(t)&&t(),C.relatedTarget=a,e.Q(n,C)},k=o=>{const{element:t,relatedTarget:s}=o;e.Bn(t),O(o,!0),w.relatedTarget=s,e.Q(t,w)},q=o=>{const{element:t,hasFade:s}=o;e.qn(t,{display:"block"}),H(o),r.getCurrentOpen(t)||e.qn(e.Jn(t),{overflow:"hidden"}),e.Mn(t,l.showClass),e.An(t,e.be),e.F(t,e.we,"true"),s?e.zn(t,()=>k(o)):k(o)},M=(o,t)=>{const{element:s,options:n,hasFade:a}=o;n.backdrop&&!t&&a&&e.kn(r.overlay,l.showClass)&&!r.getCurrentOpen(s)?(r.hideOverlay(),e.zn(r.overlay,()=>y(o))):y(o,t)},P=o=>{const{target:t}=o,s=t&&e.de(t,D),n=s&&$.getTargetElement(s),a=n&&m(n);a&&(s&&s.tagName==="A"&&o.preventDefault(),a.relatedTarget=s,a.toggle())},R=({code:o,target:t})=>{const s=e.go(r.modalActiveSelector,e.d(t)),n=s&&m(s);if(!n)return;const{options:a}=n;a.keyboard&&o===e.je&&e.kn(s,l.showClass)&&(n.relatedTarget=null,n.hide())};function j(o){const t=m(this);if(!t||e.Gn.get(this))return;const{options:s,isStatic:n,modalDialog:a}=t,{backdrop:c}=s,{target:g}=o,i=e.d(this)?.getSelection()?.toString().length,h=a?.contains(g),u=g&&e.de(g,I);n&&!h?e.Gn.set(this,()=>{e.Mn(this,E),e.zn(a,()=>J(t))},17):(u||!i&&!n&&!h&&c)&&(t.relatedTarget=u||null,t.hide(),o.preventDefault())}const J=o=>{const{element:t,modalDialog:s}=o,n=(e.u(s)?e.oe(s):0)+17;e.Nn(t,E),e.Gn.set(t,()=>e.Gn.clear(t),n)};class F extends z{static selector=G;static init=N;static getInstance=m;constructor(t,s){super(t,s);const{element:n}=this;this.modalDialog=e.go(`.${d.modalString}-dialog`,n),this.triggers=[...e.bo(D,e.d(n))].filter(a=>$.getTargetElement(a)===n),this.isStatic=this.options.backdrop==="static",this.hasFade=e.kn(n,W.fadeClass),this.relatedTarget=null,T(this,!0),this.update=this.update.bind(this)}get name(){return S.modalComponent}get defaults(){return Q}toggle(){e.kn(this.element,l.showClass)?this.hide():this.show()}show(){const{element:t,options:s,hasFade:n,relatedTarget:a}=this,{backdrop:c}=s;let g=0;if(e.kn(t,l.showClass)||(p.relatedTarget=a||void 0,e.Q(t,p),p.defaultPrevented))return;const i=r.getCurrentOpen(t);if(i&&i!==t){const h=m(i)||e.Ln(i,S.offcanvasComponent);h&&h.hide()}c?(A.hasPopup(r.overlay)?r.toggleOverlayType(!0):r.appendOverlay(t,n,!0),g=e.oe(r.overlay),r.showOverlay(),setTimeout(()=>q(this),g)):(q(this),i&&e.kn(r.overlay,l.showClass)&&r.hideOverlay())}hide(t){const{element:s,hasFade:n,relatedTarget:a}=this;e.kn(s,l.showClass)&&(v.relatedTarget=a||void 0,e.Q(s,v),!v.defaultPrevented&&(e.Nn(s,l.showClass),e.F(s,e.be,"true"),e.An(s,e.we),n?e.zn(s,()=>M(this,t)):M(this,t)))}update(){e.kn(this.element,l.showClass)&&H(this)}dispose(){T(this),this.hide(()=>super.dispose())}}module.exports=F;
//# sourceMappingURL=modal.cjs.map
