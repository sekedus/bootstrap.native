"use strict";const e=require("./base-component-2e8b2d4a.cjs"),f=require("./event-listener-09f2aa63.cjs"),j=require("./dataBsToggle-c8bc9e7f.cjs"),B=require("./dataBsDismiss-4ee313a7.cjs"),F=require("./fadeClass-a4944cf1.cjs"),d=require("./showClass-2174a6d6.cjs"),l=require("./popupContainer-536be6c3.cjs"),M=require("./getTargetElement-3f39cec8.cjs"),i=require("./isVisible-329875cd.cjs"),D="Modal",L=`.${l.modalString}`,q=`[${j.dataBsToggle}="${l.modalString}"]`,W=`[${B.dataBsDismiss}="${l.modalString}"]`,E=`${l.modalString}-static`,x={backdrop:!0,keyboard:!0},u=n=>e.Ln(n,D),z=n=>new O(n),p=e.Wn(`show.bs.${l.modalString}`),b=e.Wn(`shown.bs.${l.modalString}`),v=e.Wn(`hide.bs.${l.modalString}`),w=e.Wn(`hidden.bs.${l.modalString}`),$=n=>{const{element:t}=n,s=i.measureScrollbar(t),{clientHeight:o,scrollHeight:a}=e.k(t),{clientHeight:c,scrollHeight:g}=t,r=c!==g;if(!r&&s){const m=e.po(t)?"paddingLeft":"paddingRight",h={};h[m]=`${s}px`,e.qn(t,h)}i.setScrollbar(t,r||o!==a)},H=(n,t)=>{const s=t?f.E:f.d,{element:o}=n;s(o,e.ut,I),s(e.$n(o),e.Lt,n.update,e.Rn),s(e.d(o),e.ct,G)},C=(n,t)=>{const s=t?f.E:f.d,{triggers:o}=n;o.length&&o.forEach(a=>s(a,e.ut,A))},S=(n,t)=>{const{triggers:s,element:o,relatedTarget:a}=n;i.removeOverlay(o),e.qn(o,{paddingRight:"",display:""}),H(n);const c=p.relatedTarget||s.find(i.isVisible);c&&e.Bn(c),e.so(t)&&t(),w.relatedTarget=a,e.Q(o,w)},T=n=>{const{element:t,relatedTarget:s}=n;e.Bn(t),H(n,!0),b.relatedTarget=s,e.Q(t,b)},y=n=>{const{element:t,hasFade:s}=n;e.qn(t,{display:"block"}),$(n),i.getCurrentOpen(t)||e.qn(e.Jn(t),{overflow:"hidden"}),e.Mn(t,d.showClass),e.An(t,e.be),e.F(t,e.we,"true"),s?e.zn(t,()=>T(n)):T(n)},k=(n,t)=>{const{element:s,options:o,hasFade:a}=n;o.backdrop&&!t&&a&&e.kn(i.overlay,d.showClass)&&!i.getCurrentOpen(s)?(i.hideOverlay(),e.zn(i.overlay,()=>S(n))):S(n,t)},A=n=>{const{target:t}=n,s=t&&e.de(t,q),o=s&&M.getTargetElement(s),a=o&&u(o);!a||(s&&s.tagName==="A"&&n.preventDefault(),a.relatedTarget=s,a.toggle())},G=({code:n,target:t})=>{const s=e.go(i.modalActiveSelector,e.d(t)),o=s&&u(s);if(!o)return;const{options:a}=o;a.keyboard&&n===e.je&&e.kn(s,d.showClass)&&(o.relatedTarget=null,o.hide())};function I(n){const t=u(this);if(!t||e.Gn.get(this))return;const{options:s,isStatic:o,modalDialog:a}=t,{backdrop:c}=s,{target:g}=n,r=e.d(this)?.getSelection()?.toString().length,m=a?.contains(g),h=g&&e.de(g,W);o&&!m?e.Gn.set(this,()=>{e.Mn(this,E),e.zn(a,()=>Q(t))},17):(h||!r&&!o&&!m&&c)&&(t.relatedTarget=h||null,t.hide(),n.preventDefault())}const Q=n=>{const{element:t,modalDialog:s}=n,o=(e.u(s)?e.oe(s):0)+17;e.Nn(t,E),e.Gn.set(t,()=>e.Gn.clear(t),o)};class O extends e.BaseComponent{static selector=L;static init=z;static getInstance=u;constructor(t,s){super(t,s);const{element:o}=this;this.modalDialog=e.go(`.${l.modalString}-dialog`,o),this.triggers=[...e.bo(q,e.d(o))].filter(a=>M.getTargetElement(a)===o),this.isStatic=this.options.backdrop==="static",this.hasFade=e.kn(o,F.fadeClass),this.relatedTarget=null,C(this,!0),this.update=this.update.bind(this)}get name(){return D}get defaults(){return x}toggle(){e.kn(this.element,d.showClass)?this.hide():this.show()}show(){const{element:t,options:s,hasFade:o,relatedTarget:a}=this,{backdrop:c}=s;let g=0;if(e.kn(t,d.showClass)||(p.relatedTarget=a||void 0,e.Q(t,p),p.defaultPrevented))return;const r=i.getCurrentOpen(t);if(r&&r!==t){const h=u(r)||e.Ln(r,"Offcanvas");h&&h.hide()}c?(l.hasPopup(i.overlay)?i.toggleOverlayType(!0):i.appendOverlay(o,!0),g=e.oe(i.overlay),i.showOverlay(),setTimeout(()=>y(this),g)):(y(this),r&&e.kn(i.overlay,d.showClass)&&i.hideOverlay())}hide(t){const{element:s,hasFade:o,relatedTarget:a}=this;!e.kn(s,d.showClass)||(v.relatedTarget=a||void 0,e.Q(s,v),!v.defaultPrevented&&(e.Nn(s,d.showClass),e.F(s,e.be,"true"),e.An(s,e.we),o?e.zn(s,()=>k(this,t)):k(this,t)))}update(){e.kn(this.element,d.showClass)&&$(this)}dispose(){C(this),this.hide(()=>super.dispose())}}module.exports=O;
//# sourceMappingURL=modal.cjs.map
