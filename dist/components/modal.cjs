"use strict";const e=require("./base-component-CEXwoid1.js"),O=require("./dataBsToggle-Dj-Ng54N.js"),$=require("./dataBsDismiss-CMHF7If_.js"),H=require("./fadeClass-Co6nOzNJ.js"),d=require("./showClass-D_Ms1FgG.js"),l=require("./popupContainer-B1-dZ_ye.js"),a=require("./isVisible-Bxf-Wn7_.js"),E=require("./getTargetElement-BJtPWRez.js"),Z=require("./isDisabled-CST_xG4K.js"),F=`.${l.modalString}`,_=`[${O.dataBsToggle}="${l.modalString}"]`,B=`[${$.dataBsDismiss}="${l.modalString}"]`,D=`${l.modalString}-static`,P={backdrop:!0,keyboard:!0},m=o=>e.to(o,a.modalComponent),R=o=>new M(o),f=e.mo(`show.bs.${l.modalString}`),b=e.mo(`shown.bs.${l.modalString}`),p=e.mo(`hide.bs.${l.modalString}`),S=e.mo(`hidden.bs.${l.modalString}`),q=o=>{const{element:t}=o,s=a.measureScrollbar(t),{clientHeight:n,scrollHeight:i}=e.S(t),{clientHeight:c,scrollHeight:g}=t,r=c!==g;if(!r&&s){const u={[e.Uo(t)?"paddingLeft":"paddingRight"]:`${s}px`};e.Eo(t,u)}a.setScrollbar(t,r||n!==i)},k=(o,t)=>{const s=t?e.E:e.r,{element:n}=o;s(n,e.vt,I),s(e.d(n),e.ft,A),t?o._observer.observe(n):o._observer.disconnect()},T=o=>{const{triggers:t,element:s,relatedTarget:n}=o;a.removeOverlay(s),e.Eo(s,{paddingRight:"",display:""}),k(o);const i=f.relatedTarget||t.find(a.isVisible);i&&e.ao(i),S.relatedTarget=n||void 0,e.q(s,S),e.Ao(s)},C=o=>{const{element:t,relatedTarget:s}=o;e.ao(t),k(o,!0),b.relatedTarget=s||void 0,e.q(t,b),e.Ao(t)},w=o=>{const{element:t,hasFade:s}=o;e.Eo(t,{display:"block"}),q(o),a.getCurrentOpen(t)||e.Eo(e.So(t),{overflow:"hidden"}),e.qn(t,d.showClass),e.Gn(t,e.J),e.Qn(t,e.Pe,"true"),s?e.so(t,()=>C(o)):C(o)},y=o=>{const{element:t,options:s,hasFade:n}=o;s.backdrop&&n&&e.Zn(a.overlay,d.showClass)&&!a.getCurrentOpen(t)?(a.hideOverlay(),e.so(a.overlay,()=>T(o))):T(o)};function x(o){const t=E.getTargetElement(this),s=t&&m(t);Z.isDisabled(this)||s&&(this.tagName==="A"&&o.preventDefault(),s.relatedTarget=this,s.toggle())}const A=({code:o,target:t})=>{const s=e.Ro(a.modalActiveSelector,e.d(t)),n=s&&m(s);if(!n)return;const{options:i}=n;i.keyboard&&o===e.gn&&e.Zn(s,d.showClass)&&(n.relatedTarget=null,n.hide())},I=o=>{const{currentTarget:t}=o,s=t&&m(t);if(!s||!t||e.ho.get(t))return;const{options:n,isStatic:i,modalDialog:c}=s,{backdrop:g}=n,{target:r}=o,h=e.d(t)?.getSelection()?.toString().length,u=c.contains(r),v=r&&e.ke(r,B);i&&!u?e.ho.set(t,()=>{e.qn(t,D),e.so(c,()=>L(s))},17):(v||!h&&!i&&!u&&g)&&(s.relatedTarget=v||null,s.hide(),o.preventDefault())},L=o=>{const{element:t,modalDialog:s}=o,n=(e.ue(s)||0)+17;e.Yn(t,D),e.ho.set(t,()=>e.ho.clear(t),n)};class M extends e.BaseComponent{static selector=F;static init=R;static getInstance=m;constructor(t,s){super(t,s);const{element:n}=this,i=e.Ro(`.${l.modalString}-dialog`,n);i&&(this.modalDialog=i,this.triggers=[...e.de(_,e.d(n))].filter(c=>E.getTargetElement(c)===n),this.isStatic=this.options.backdrop==="static",this.hasFade=e.Zn(n,H.fadeClass),this.relatedTarget=null,this._observer=new ResizeObserver(()=>this.update()),this._toggleEventListeners(!0))}get name(){return a.modalComponent}get defaults(){return P}toggle(){e.Zn(this.element,d.showClass)?this.hide():this.show()}show(){const{element:t,options:s,hasFade:n,relatedTarget:i}=this,{backdrop:c}=s;let g=0;if(e.Zn(t,d.showClass)||(f.relatedTarget=i||void 0,e.q(t,f),f.defaultPrevented))return;const r=a.getCurrentOpen(t);if(r&&r!==t){const h=m(r)||e.to(r,a.offcanvasComponent);h&&h.hide()}c?(l.hasPopup(a.overlay)?a.toggleOverlayType(!0):a.appendOverlay(t,n,!0),g=e.ue(a.overlay),a.showOverlay(),setTimeout(()=>w(this),g)):(w(this),r&&e.Zn(a.overlay,d.showClass)&&a.hideOverlay())}hide(){const{element:t,hasFade:s,relatedTarget:n}=this;e.Zn(t,d.showClass)&&(p.relatedTarget=n||void 0,e.q(t,p),!p.defaultPrevented&&(e.Yn(t,d.showClass),e.Qn(t,e.J,"true"),e.Gn(t,e.Pe),s?e.so(t,()=>y(this)):y(this)))}update=()=>{e.Zn(this.element,d.showClass)&&q(this)};_toggleEventListeners=t=>{const s=t?e.E:e.r,{triggers:n}=this;n.length&&n.forEach(i=>{s(i,e.vt,x)})};dispose(){const t={...this},{modalDialog:s,hasFade:n}=t,i=()=>setTimeout(()=>super.dispose(),17);this.hide(),this._toggleEventListeners(),n?e.so(s,i):i()}}module.exports=M;
//# sourceMappingURL=modal.cjs.map
