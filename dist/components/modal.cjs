"use strict";const e=require("./base-component-CEXwoid1.js"),$=require("./dataBsToggle-Dj-Ng54N.js"),H=require("./dataBsDismiss-CMHF7If_.js"),Z=require("./fadeClass-Co6nOzNJ.js"),d=require("./showClass-D_Ms1FgG.js"),l=require("./popupContainer-B1-dZ_ye.js"),r=require("./isVisible-Bxf-Wn7_.js"),E=require("./getTargetElement-BJtPWRez.js"),F=require("./isDisabled-CST_xG4K.js"),_=`.${l.modalString}`,D=`[${$.dataBsToggle}="${l.modalString}"]`,B=`[${H.dataBsDismiss}="${l.modalString}"]`,q=`${l.modalString}-static`,P={backdrop:!0,keyboard:!0},m=s=>e.to(s,r.modalComponent),R=s=>new O(s),f=e.mo(`show.bs.${l.modalString}`),b=e.mo(`shown.bs.${l.modalString}`),p=e.mo(`hide.bs.${l.modalString}`),S=e.mo(`hidden.bs.${l.modalString}`),k=s=>{const{element:t}=s,o=r.measureScrollbar(t),{clientHeight:n,scrollHeight:a}=e.S(t),{clientHeight:c,scrollHeight:g}=t,i=c!==g;if(!i&&o){const u={[e.Uo(t)?"paddingLeft":"paddingRight"]:`${o}px`};e.Eo(t,u)}r.setScrollbar(t,i||n!==a)},M=(s,t)=>{const o=t?e.E:e.r,{element:n}=s;o(n,e.vt,I),o(e.d(n),e.ft,A),t?s._observer.observe(n):s._observer.disconnect()},T=s=>{const{triggers:t,element:o,relatedTarget:n}=s;r.removeOverlay(o),e.Eo(o,{paddingRight:"",display:""}),M(s);const a=f.relatedTarget||t.find(r.isVisible);a&&e.ao(a),S.relatedTarget=n||void 0,e.q(o,S),e.Ao(o)},C=s=>{const{element:t,relatedTarget:o}=s;e.ao(t),M(s,!0),b.relatedTarget=o||void 0,e.q(t,b),e.Ao(t)},w=s=>{const{element:t,hasFade:o}=s;e.Eo(t,{display:"block"}),k(s),r.getCurrentOpen(t)||e.Eo(e.So(t),{overflow:"hidden"}),e.qn(t,d.showClass),e.Gn(t,e.J),e.Qn(t,e.Pe,"true"),o?e.so(t,()=>C(s)):C(s)},y=s=>{const{element:t,options:o,hasFade:n}=s;o.backdrop&&n&&e.Zn(r.overlay,d.showClass)&&!r.getCurrentOpen(t)?(r.hideOverlay(),e.so(r.overlay,()=>T(s))):T(s)},x=s=>{const{target:t}=s,o=t&&e.ke(t,D),n=o&&E.getTargetElement(o),a=n&&m(n);a&&(o&&o.tagName==="A"&&s.preventDefault(),a.relatedTarget=o,a.toggle())},A=({code:s,target:t})=>{const o=e.Ro(r.modalActiveSelector,e.d(t)),n=o&&m(o);if(!n)return;const{options:a}=n;a.keyboard&&s===e.gn&&e.Zn(o,d.showClass)&&(n.relatedTarget=null,n.hide())},I=s=>{const{currentTarget:t}=s,o=t&&m(t);if(!o||!t||e.ho.get(t))return;const{options:n,isStatic:a,modalDialog:c}=o,{backdrop:g}=n,{target:i}=s,h=e.d(t)?.getSelection()?.toString().length,u=c.contains(i),v=i&&e.ke(i,B);a&&!u?e.ho.set(t,()=>{e.qn(t,q),e.so(c,()=>L(o))},17):(v||!h&&!a&&!u&&g)&&(o.relatedTarget=v||null,o.hide(),s.preventDefault())},L=s=>{const{element:t,modalDialog:o}=s,n=(e.ue(o)||0)+17;e.Yn(t,q),e.ho.set(t,()=>e.ho.clear(t),n)};class O extends e.BaseComponent{static selector=_;static init=R;static getInstance=m;constructor(t,o){super(t,o);const{element:n}=this,a=e.Ro(`.${l.modalString}-dialog`,n);a&&(this.modalDialog=a,this.triggers=[...e.de(D,e.d(n))].filter(c=>E.getTargetElement(c)===n),this.isStatic=this.options.backdrop==="static",this.hasFade=e.Zn(n,Z.fadeClass),this.relatedTarget=null,this._observer=new ResizeObserver(()=>this.update()),this._toggleEventListeners(!0))}get name(){return r.modalComponent}get defaults(){return P}toggle(){e.Zn(this.element,d.showClass)?this.hide():this.show()}show(){const{element:t,options:o,hasFade:n,relatedTarget:a}=this,{backdrop:c}=o;let g=0;if(e.Zn(t,d.showClass)||(f.relatedTarget=a||void 0,e.q(t,f),f.defaultPrevented))return;const i=r.getCurrentOpen(t);if(i&&i!==t){const h=m(i)||e.to(i,r.offcanvasComponent);h&&h.hide()}c?(l.hasPopup(r.overlay)?r.toggleOverlayType(!0):r.appendOverlay(t,n,!0),g=e.ue(r.overlay),r.showOverlay(),setTimeout(()=>w(this),g)):(w(this),i&&e.Zn(r.overlay,d.showClass)&&r.hideOverlay())}hide(){const{element:t,hasFade:o,relatedTarget:n}=this;e.Zn(t,d.showClass)&&(p.relatedTarget=n||void 0,e.q(t,p),!p.defaultPrevented&&(e.Yn(t,d.showClass),e.Qn(t,e.J,"true"),e.Gn(t,e.Pe),o?e.so(t,()=>y(this)):y(this)))}update=()=>{e.Zn(this.element,d.showClass)&&k(this)};_toggleEventListeners=t=>{const o=t?e.E:e.r,{triggers:n}=this;n.length&&n.forEach(a=>{F.isDisabled(a)||o(a,e.vt,x)})};dispose(){const t={...this},{modalDialog:o,hasFade:n}=t,a=()=>setTimeout(()=>super.dispose(),17);this.hide(),this._toggleEventListeners(),n?e.so(o,a):a()}}module.exports=O;
//# sourceMappingURL=modal.cjs.map
