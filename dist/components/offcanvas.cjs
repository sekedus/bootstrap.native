"use strict";const e=require("./base-component-CEXwoid1.js"),E=require("./dataBsDismiss-CMHF7If_.js"),q=require("./dataBsToggle-Dj-Ng54N.js"),c=require("./showClass-D_Ms1FgG.js"),r=require("./popupContainer-B1-dZ_ye.js"),a=require("./isVisible-Bxf-Wn7_.js"),C=require("./getTargetElement-BJtPWRez.js"),D=require("./isDisabled-CST_xG4K.js"),$=`.${r.offcanvasString}`,O=`[${q.dataBsToggle}="${r.offcanvasString}"]`,k=`[${E.dataBsDismiss}="${r.offcanvasString}"]`,d=`${r.offcanvasString}-toggling`,A={backdrop:!0,keyboard:!0,scroll:!1},f=o=>e.to(o,a.offcanvasComponent),H=o=>new y(o),v=e.mo(`show.bs.${r.offcanvasString}`),T=e.mo(`shown.bs.${r.offcanvasString}`),u=e.mo(`hide.bs.${r.offcanvasString}`),w=e.mo(`hidden.bs.${r.offcanvasString}`),Z=o=>{const{element:t}=o,{clientHeight:s,scrollHeight:n}=e.S(t);a.setScrollbar(t,s!==n)},S=(o,t)=>{const s=t?e.E:e.r,n=e.d(o.element);s(n,e.ft,I),s(n,e.vt,G)},b=o=>{const{element:t,options:s}=o;s.scroll||(Z(o),e.Eo(e.So(t),{overflow:"hidden"})),e.qn(t,d),e.qn(t,c.showClass),e.Eo(t,{visibility:"visible"}),e.so(t,()=>L(o))},B=o=>{const{element:t,options:s}=o,n=a.getCurrentOpen(t);t.blur(),!n&&s.backdrop&&e.Zn(a.overlay,c.showClass)&&a.hideOverlay(),e.so(t,()=>Q(o))};function P(o){const t=C.getTargetElement(this),s=t&&f(t);D.isDisabled(this)||s&&(s.relatedTarget=this,s.toggle(),this.tagName==="A"&&o.preventDefault())}const G=o=>{const{target:t}=o,s=e.Ro(a.offcanvasActiveSelector,e.d(t));if(!s)return;const n=e.Ro(k,s),i=f(s);if(!i)return;const{options:l,triggers:g}=i,{backdrop:m}=l,h=e.ke(t,O),p=e.d(s).getSelection();a.overlay.contains(t)&&m==="static"||(!(p&&p.toString().length)&&(!s.contains(t)&&m&&(!h||g.includes(t))||n&&n.contains(t))&&(i.relatedTarget=n&&n.contains(t)?n:void 0,i.hide()),h&&h.tagName==="A"&&o.preventDefault())},I=({code:o,target:t})=>{const s=e.Ro(a.offcanvasActiveSelector,e.d(t)),n=s&&f(s);n&&n.options.keyboard&&o===e.gn&&(n.relatedTarget=void 0,n.hide())},L=o=>{const{element:t}=o;e.Yn(t,d),e.Gn(t,e.J),e.Qn(t,e.Pe,"true"),e.Qn(t,"role","dialog"),e.q(t,T),S(o,!0),e.ao(t),e.Ao(t)},Q=o=>{const{element:t,triggers:s}=o;e.Qn(t,e.J,"true"),e.Gn(t,e.Pe),e.Gn(t,"role"),e.Eo(t,{visibility:""});const n=v.relatedTarget||s.find(a.isVisible);n&&e.ao(n),a.removeOverlay(t),e.q(t,w),e.Yn(t,d),e.Ao(t),a.getCurrentOpen(t)||S(o)};class y extends e.BaseComponent{static selector=$;static init=H;static getInstance=f;constructor(t,s){super(t,s);const{element:n}=this;this.triggers=[...e.de(O,e.d(n))].filter(i=>C.getTargetElement(i)===n),this.relatedTarget=void 0,this._toggleEventListeners(!0)}get name(){return a.offcanvasComponent}get defaults(){return A}toggle(){e.Zn(this.element,c.showClass)?this.hide():this.show()}show(){const{element:t,options:s,relatedTarget:n}=this;let i=0;if(e.Zn(t,c.showClass)||(v.relatedTarget=n||void 0,T.relatedTarget=n||void 0,e.q(t,v),v.defaultPrevented))return;const l=a.getCurrentOpen(t);if(l&&l!==t){const g=f(l)||e.to(l,a.modalComponent);g&&g.hide()}s.backdrop?(r.hasPopup(a.overlay)?a.toggleOverlayType():a.appendOverlay(t,!0),i=e.ue(a.overlay),a.showOverlay(),setTimeout(()=>b(this),i)):(b(this),l&&e.Zn(a.overlay,c.showClass)&&a.hideOverlay())}hide(){const{element:t,relatedTarget:s}=this;e.Zn(t,c.showClass)&&(u.relatedTarget=s||void 0,w.relatedTarget=s||void 0,e.q(t,u),!u.defaultPrevented&&(e.qn(t,d),e.Yn(t,c.showClass),B(this)))}_toggleEventListeners=t=>{const s=t?e.E:e.r;this.triggers.forEach(n=>{s(n,e.vt,P)})};dispose(){const{element:t}=this,s=e.Zn(t,c.showClass),n=()=>setTimeout(()=>super.dispose(),1);this.hide(),this._toggleEventListeners(),s?e.so(t,n):n()}}module.exports=y;
//# sourceMappingURL=offcanvas.cjs.map
