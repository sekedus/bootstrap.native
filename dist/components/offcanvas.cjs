"use strict";const e=require("./base-component-2e8b2d4a.cjs"),v=require("./event-listener-09f2aa63.cjs"),k=require("./dataBsDismiss-4ee313a7.cjs"),B=require("./dataBsToggle-c8bc9e7f.cjs"),l=require("./showClass-2174a6d6.cjs"),i=require("./popupContainer-536be6c3.cjs"),S=require("./getTargetElement-3f39cec8.cjs"),a=require("./isVisible-329875cd.cjs");require("./fadeClass-a4944cf1.cjs");const q="Offcanvas",A=`.${i.offcanvasString}`,m=`[${B.dataBsToggle}="${i.offcanvasString}"]`,H=`[${k.dataBsDismiss}="${i.offcanvasString}"]`,h=`${i.offcanvasString}-toggling`,N={backdrop:!0,keyboard:!0,scroll:!1},g=o=>e.Ln(o,q),M=o=>new $(o),d=e.Wn(`show.bs.${i.offcanvasString}`),D=e.Wn(`shown.bs.${i.offcanvasString}`),p=e.Wn(`hide.bs.${i.offcanvasString}`),E=e.Wn(`hidden.bs.${i.offcanvasString}`),Q=o=>{const{element:t}=o,{clientHeight:s,scrollHeight:n}=e.k(t);a.setScrollbar(t,s!==n)},O=(o,t)=>{const s=t?v.E:v.d;o.triggers.forEach(n=>s(n,e.ut,W))},j=(o,t)=>{const s=t?v.E:v.d,n=e.d(o.element);s(n,e.ct,F),s(n,e.ut,z)},T=o=>{const{element:t,options:s}=o;s.scroll||(Q(o),e.qn(e.Jn(t),{overflow:"hidden"})),e.Mn(t,h),e.Mn(t,l.showClass),e.qn(t,{visibility:"visible"}),e.zn(t,()=>I(o))},w=(o,t)=>{const{element:s,options:n}=o,r=a.getCurrentOpen(s);s.blur(),!r&&n.backdrop&&e.kn(a.overlay,l.showClass)?(a.hideOverlay(),e.zn(a.overlay,()=>y(o,t))):y(o,t)},W=o=>{const t=e.de(o.target,m),s=t&&S.getTargetElement(t),n=s&&g(s);n&&(n.relatedTarget=t,n.toggle(),t&&t.tagName==="A"&&o.preventDefault())},z=o=>{const{target:t}=o,s=e.go(a.offcanvasActiveSelector,e.d(t)),n=e.go(H,s),r=s&&g(s);if(!r)return;const{options:c,triggers:b}=r,{backdrop:f}=c,u=e.de(t,m),C=e.d(s).getSelection();a.overlay.contains(t)&&f==="static"||(!(C&&C.toString().length)&&(!s.contains(t)&&f&&(!u||b.includes(t))||n&&n.contains(t))&&(r.relatedTarget=n&&n.contains(t)?n:null,r.hide()),u&&u.tagName==="A"&&o.preventDefault())},F=({code:o,target:t})=>{const s=e.go(a.offcanvasActiveSelector,e.d(t)),n=s&&g(s);!n||n.options.keyboard&&o===e.je&&(n.relatedTarget=null,n.hide())},I=o=>{const{element:t}=o;e.Nn(t,h),e.An(t,e.be),e.F(t,e.we,"true"),e.F(t,"role","dialog"),e.Q(t,D),j(o,!0),e.Bn(t)},y=(o,t)=>{const{element:s,triggers:n}=o;e.F(s,e.be,"true"),e.An(s,e.we),e.An(s,"role"),e.qn(s,{visibility:""});const r=d.relatedTarget||n.find(a.isVisible);r&&e.Bn(r),a.removeOverlay(s),e.Q(s,E),e.Nn(s,h),a.getCurrentOpen(s)||j(o),e.so(t)&&t()};class $ extends e.BaseComponent{static selector=A;static init=M;static getInstance=g;constructor(t,s){super(t,s);const{element:n}=this;this.triggers=[...e.bo(m,e.d(n))].filter(r=>S.getTargetElement(r)===n),this.relatedTarget=null,O(this,!0)}get name(){return q}get defaults(){return N}toggle(){e.kn(this.element,l.showClass)?this.hide():this.show()}show(){const{element:t,options:s,relatedTarget:n}=this;let r=0;if(e.kn(t,l.showClass)||(d.relatedTarget=n||void 0,D.relatedTarget=n||void 0,e.Q(t,d),d.defaultPrevented))return;const c=a.getCurrentOpen(t);if(c&&c!==t){const f=g(c)||e.Ln(c,"Modal");f&&f.hide()}s.backdrop?(i.hasPopup(a.overlay)?a.toggleOverlayType():a.appendOverlay(!0),r=e.oe(a.overlay),a.showOverlay(),setTimeout(()=>T(this),r)):(T(this),c&&e.kn(a.overlay,l.showClass)&&a.hideOverlay())}hide(t){const{element:s,relatedTarget:n}=this;!e.kn(s,l.showClass)||(p.relatedTarget=n||void 0,E.relatedTarget=n||void 0,e.Q(s,p),!p.defaultPrevented&&(e.Mn(s,h),e.Nn(s,l.showClass),t?w(this,t):e.zn(s,()=>w(this,t))))}dispose(){O(this),this.hide(()=>super.dispose())}}module.exports=$;
//# sourceMappingURL=offcanvas.cjs.map
