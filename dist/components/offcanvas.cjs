"use strict";const t=require("./base-component-CEXwoid1.js"),E=require("./dataBsDismiss-CMHF7If_.js"),q=require("./dataBsToggle-Dj-Ng54N.js"),c=require("./showClass-D_Ms1FgG.js"),i=require("./popupContainer-B1-dZ_ye.js"),a=require("./isVisible-Bxf-Wn7_.js"),O=require("./getTargetElement-BJtPWRez.js"),D=require("./isDisabled-CST_xG4K.js"),k=`.${i.offcanvasString}`,m=`[${q.dataBsToggle}="${i.offcanvasString}"]`,$=`[${E.dataBsDismiss}="${i.offcanvasString}"]`,d=`${i.offcanvasString}-toggling`,A={backdrop:!0,keyboard:!0,scroll:!1},f=o=>t.to(o,a.offcanvasComponent),H=o=>new y(o),v=t.mo(`show.bs.${i.offcanvasString}`),T=t.mo(`shown.bs.${i.offcanvasString}`),u=t.mo(`hide.bs.${i.offcanvasString}`),w=t.mo(`hidden.bs.${i.offcanvasString}`),Z=o=>{const{element:e}=o,{clientHeight:n,scrollHeight:s}=t.S(e);a.setScrollbar(e,n!==s)},S=(o,e)=>{const n=e?t.E:t.r,s=t.d(o.element);n(s,t.ft,I),n(s,t.vt,G)},C=o=>{const{element:e,options:n}=o;n.scroll||(Z(o),t.Eo(t.So(e),{overflow:"hidden"})),t.qn(e,d),t.qn(e,c.showClass),t.Eo(e,{visibility:"visible"}),t.so(e,()=>L(o))},B=o=>{const{element:e,options:n}=o,s=a.getCurrentOpen(e);e.blur(),!s&&n.backdrop&&t.Zn(a.overlay,c.showClass)&&a.hideOverlay(),t.so(e,()=>Q(o))},P=o=>{const e=t.ke(o.target,m),n=e&&O.getTargetElement(e),s=n&&f(n);s&&(s.relatedTarget=e,s.toggle(),e?.tagName==="A"&&o.preventDefault())},G=o=>{const{target:e}=o,n=t.Ro(a.offcanvasActiveSelector,t.d(e));if(!n)return;const s=t.Ro($,n),r=f(n);if(!r)return;const{options:l,triggers:g}=r,{backdrop:p}=l,h=t.ke(e,m),b=t.d(n).getSelection();a.overlay.contains(e)&&p==="static"||(!(b&&b.toString().length)&&(!n.contains(e)&&p&&(!h||g.includes(e))||s&&s.contains(e))&&(r.relatedTarget=s&&s.contains(e)?s:void 0,r.hide()),h&&h.tagName==="A"&&o.preventDefault())},I=({code:o,target:e})=>{const n=t.Ro(a.offcanvasActiveSelector,t.d(e)),s=n&&f(n);s&&s.options.keyboard&&o===t.gn&&(s.relatedTarget=void 0,s.hide())},L=o=>{const{element:e}=o;t.Yn(e,d),t.Gn(e,t.J),t.Qn(e,t.Pe,"true"),t.Qn(e,"role","dialog"),t.q(e,T),S(o,!0),t.ao(e),t.Ao(e)},Q=o=>{const{element:e,triggers:n}=o;t.Qn(e,t.J,"true"),t.Gn(e,t.Pe),t.Gn(e,"role"),t.Eo(e,{visibility:""});const s=v.relatedTarget||n.find(a.isVisible);s&&t.ao(s),a.removeOverlay(e),t.q(e,w),t.Yn(e,d),t.Ao(e),a.getCurrentOpen(e)||S(o)};class y extends t.BaseComponent{static selector=k;static init=H;static getInstance=f;constructor(e,n){super(e,n);const{element:s}=this;this.triggers=[...t.de(m,t.d(s))].filter(r=>O.getTargetElement(r)===s),this.relatedTarget=void 0,this._toggleEventListeners(!0)}get name(){return a.offcanvasComponent}get defaults(){return A}toggle(){t.Zn(this.element,c.showClass)?this.hide():this.show()}show(){const{element:e,options:n,relatedTarget:s}=this;let r=0;if(t.Zn(e,c.showClass)||(v.relatedTarget=s||void 0,T.relatedTarget=s||void 0,t.q(e,v),v.defaultPrevented))return;const l=a.getCurrentOpen(e);if(l&&l!==e){const g=f(l)||t.to(l,a.modalComponent);g&&g.hide()}n.backdrop?(i.hasPopup(a.overlay)?a.toggleOverlayType():a.appendOverlay(e,!0),r=t.ue(a.overlay),a.showOverlay(),setTimeout(()=>C(this),r)):(C(this),l&&t.Zn(a.overlay,c.showClass)&&a.hideOverlay())}hide(){const{element:e,relatedTarget:n}=this;t.Zn(e,c.showClass)&&(u.relatedTarget=n||void 0,w.relatedTarget=n||void 0,t.q(e,u),!u.defaultPrevented&&(t.qn(e,d),t.Yn(e,c.showClass),B(this)))}_toggleEventListeners=e=>{const n=e?t.E:t.r;this.triggers.forEach(s=>{D.isDisabled(s)||n(s,t.vt,P)})};dispose(){const{element:e}=this,n=t.Zn(e,c.showClass),s=()=>setTimeout(()=>super.dispose(),1);this.hide(),this._toggleEventListeners(),n?t.so(e,s):s()}}module.exports=y;
//# sourceMappingURL=offcanvas.cjs.map
