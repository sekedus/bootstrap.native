"use strict";const t=require("./base-component-DaZCwW-u.js"),d=require("./event-listener-BQdA_KAC.js"),E=require("./dataBsDismiss-CMHF7If_.js"),$=require("./dataBsToggle-Dj-Ng54N.js"),c=require("./showClass-D_Ms1FgG.js"),i=require("./popupContainer-CSoNJ-n6.js"),a=require("./isVisible-BNby5_sf.js"),T=require("./getTargetElement-CXAsWuzD.js"),D=`.${i.offcanvasString}`,p=`[${$.dataBsToggle}="${i.offcanvasString}"]`,k=`[${E.dataBsDismiss}="${i.offcanvasString}"]`,h=`${i.offcanvasString}-toggling`,A={backdrop:!0,keyboard:!0,scroll:!1},f=o=>t.to(o,a.offcanvasComponent),H=o=>new q(o),v=t.vo(`show.bs.${i.offcanvasString}`),w=t.vo(`shown.bs.${i.offcanvasString}`),m=t.vo(`hide.bs.${i.offcanvasString}`),S=t.vo(`hidden.bs.${i.offcanvasString}`),Y=o=>{const{element:e}=o,{clientHeight:n,scrollHeight:s}=t.S(e);a.setScrollbar(e,n!==s)},y=(o,e)=>{const n=e?d.E:d.r,s=t.d(o.element);n(s,t.dt,G),n(s,t.mt,L)},O=o=>{const{element:e,options:n}=o;n.scroll||(Y(o),t.ho(t.So(e),{overflow:"hidden"})),t.qn(e,h),t.qn(e,c.showClass),t.ho(e,{visibility:"visible"}),t.ro(e,()=>I(o))},B=o=>{const{element:e,options:n}=o,s=a.getCurrentOpen(e);e.blur(),!s&&n.backdrop&&t.Yn(a.overlay,c.showClass)&&a.hideOverlay(),t.ro(e,()=>Q(o))},P=o=>{const e=t.ke(o.target,p),n=e&&T.getTargetElement(e),s=n&&f(n);s&&(s.relatedTarget=e,s.toggle(),e?.tagName==="A"&&o.preventDefault())},L=o=>{const{target:e}=o,n=t.Ro(a.offcanvasActiveSelector,t.d(e));if(!n)return;const s=t.Ro(k,n),r=f(n);if(!r)return;const{options:l,triggers:g}=r,{backdrop:C}=l,u=t.ke(e,p),b=t.d(n).getSelection();a.overlay.contains(e)&&C==="static"||(!(b&&b.toString().length)&&(!n.contains(e)&&C&&(!u||g.includes(e))||s&&s.contains(e))&&(r.relatedTarget=s&&s.contains(e)?s:void 0,r.hide()),u&&u.tagName==="A"&&o.preventDefault())},G=({code:o,target:e})=>{const n=t.Ro(a.offcanvasActiveSelector,t.d(e)),s=n&&f(n);s&&s.options.keyboard&&o===t.gn&&(s.relatedTarget=void 0,s.hide())},I=o=>{const{element:e}=o;t.Zn(e,h),t.Gn(e,t.$),t.Qn(e,t.Pe,"true"),t.Qn(e,"role","dialog"),t.q(e,w),y(o,!0),t.io(e),t.Ao(e)},Q=o=>{const{element:e,triggers:n}=o;t.Qn(e,t.$,"true"),t.Gn(e,t.Pe),t.Gn(e,"role"),t.ho(e,{visibility:""});const s=v.relatedTarget||n.find(a.isVisible);s&&t.io(s),a.removeOverlay(e),t.q(e,S),t.Zn(e,h),t.Ao(e),a.getCurrentOpen(e)||y(o)};class q extends t.BaseComponent{static selector=D;static init=H;static getInstance=f;constructor(e,n){super(e,n);const{element:s}=this;this.triggers=[...t.de(p,t.d(s))].filter(r=>T.getTargetElement(r)===s),this.relatedTarget=void 0,this._toggleEventListeners(!0)}get name(){return a.offcanvasComponent}get defaults(){return A}toggle(){t.Yn(this.element,c.showClass)?this.hide():this.show()}show(){const{element:e,options:n,relatedTarget:s}=this;let r=0;if(t.Yn(e,c.showClass)||(v.relatedTarget=s||void 0,w.relatedTarget=s||void 0,t.q(e,v),v.defaultPrevented))return;const l=a.getCurrentOpen(e);if(l&&l!==e){const g=f(l)||t.to(l,a.modalComponent);g&&g.hide()}n.backdrop?(i.hasPopup(a.overlay)?a.toggleOverlayType():a.appendOverlay(e,!0),r=t.ie(a.overlay),a.showOverlay(),setTimeout(()=>O(this),r)):(O(this),l&&t.Yn(a.overlay,c.showClass)&&a.hideOverlay())}hide(){const{element:e,relatedTarget:n}=this;t.Yn(e,c.showClass)&&(m.relatedTarget=n||void 0,S.relatedTarget=n||void 0,t.q(e,m),!m.defaultPrevented&&(t.qn(e,h),t.Zn(e,c.showClass),B(this)))}_toggleEventListeners=e=>{const n=e?d.E:d.r;this.triggers.forEach(s=>n(s,t.mt,P))};dispose(){const{element:e}=this,n=t.Yn(e,c.showClass),s=()=>setTimeout(()=>super.dispose(),1);this.hide(),this._toggleEventListeners(),n?t.ro(e,s):s()}}module.exports=q;
//# sourceMappingURL=offcanvas.cjs.map
