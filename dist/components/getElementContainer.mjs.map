{"version":3,"file":"getElementContainer.mjs","sources":["../../src/util/getElementContainer.ts"],"sourcesContent":["import { getDocumentBody, isShadowRoot, isTableElement, getParentNode, getElementStyle } from '@thednp/shorty';\n\n/**\n * Returns an `HTMLElement` to be used as default value for *options.container*\n * for `Tooltip` / `Popover` components.\n *\n * @see https://github.com/floating-ui/floating-ui\n *\n * @param element the target\n * @returns the query result\n */\nconst getElementContainer = (element: HTMLElement): ParentNode => {\n  const majorBlockTags = ['HTML', 'BODY'];\n  const containers: ParentNode[] = [];\n  let { parentNode } = element as Node;\n\n  while (parentNode && !majorBlockTags.includes(parentNode.nodeName)) {\n    parentNode = getParentNode(parentNode) as ParentNode;\n    /* istanbul ignore else */\n    if (!(isShadowRoot(parentNode) || isTableElement(parentNode))) {\n      containers.push(parentNode);\n    }\n  }\n\n  return (\n    containers.find((c, i) => {\n      if (\n        getElementStyle(c as HTMLElement, 'position') !== 'relative' &&\n        containers.slice(i + 1).every(r => getElementStyle(r as HTMLElement, 'position') === 'static')\n      ) {\n        return c;\n      }\n      return null;\n    }) || getDocumentBody(element)\n  );\n};\n\nexport default getElementContainer;\n"],"names":["getElementContainer","element","majorBlockTags","containers","parentNode","getParentNode","isShadowRoot","isTableElement","c","getElementStyle","getDocumentBody"],"mappings":";AAWM,MAAAA,IAAsB,CAACC,MAAqC;AAC1D,QAAAC,IAAiB,CAAC,QAAQ,MAAM,GAChCC,IAA2B,CAAA;AAC7B,MAAA,EAAE,YAAAC,EAAe,IAAAH;AAErB,SAAOG,KAAc,CAACF,EAAe,SAASE,EAAW,QAAQ;AAC/D,IAAAA,IAAaC,EAAcD,CAAU,GAE/BE,EAAaF,CAAU,KAAKG,EAAeH,CAAU,KACzDD,EAAW,KAAKC,CAAU;AAI9B,SACED,EAAW,KAAK,CAACK,GAAG,MAEhBC,EAAgBD,GAAkB,UAAU,MAAM,cAClDL,EAAW,MAAM,IAAI,CAAC,EAAE,MAAM,CAAK,MAAAM,EAAgB,GAAkB,UAAU,MAAM,QAAQ,IAEtFD,IAEF,IACR,KAAKE,EAAgBT,CAAO;AAEjC;"}