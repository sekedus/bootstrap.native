"use strict";var X=Object.defineProperty;var K=(i,o,t)=>o in i?X(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t;var E=(i,o,t)=>(K(i,typeof o!="symbol"?o+"":o,t),t);const e=require("@thednp/shorty"),L=require("@thednp/event-listener"),m=require("./activeClass-a1284579.js"),I=require("./getTargetElement-93cf2bb8.js"),M=require("./base-component-f3cef043.js"),T="carousel",N="Carousel",y=`[data-bs-ride="${T}"]`,h=`${T}-item`,q="data-bs-slide-to",p="data-bs-slide",C="paused",w={pause:"hover",keyboard:!1,touch:!0,interval:5e3},g=i=>e.getInstance(i,N),_=i=>new $(i);let x=0,S=0,P=0;const b=e.createCustomEvent(`slide.bs.${T}`),D=e.createCustomEvent(`slid.bs.${T}`),k=i=>{const{index:o,direction:t,element:s,slides:n,options:a}=i;if(i.isAnimating){const c=R(i),l=t==="left"?"next":"prev",r=t==="left"?"start":"end";e.addClass(n[o],m.activeClass),e.removeClass(n[o],`${h}-${l}`),e.removeClass(n[o],`${h}-${r}`),e.removeClass(n[c],m.activeClass),e.removeClass(n[c],`${h}-${r}`),e.dispatchEvent(s,D),e.Timer.clear(s,p),i.cycle&&!e.getDocument(s).hidden&&a.interval&&!i.isPaused&&i.cycle()}};function j(){const i=g(this);i&&!i.isPaused&&!e.Timer.get(this,C)&&e.addClass(this,C)}function U(){const i=g(this);i&&i.isPaused&&!e.Timer.get(this,C)&&i.cycle()}function z(i){i.preventDefault();const o=e.closest(this,y)||I.getTargetElement(this),t=g(o);if(t&&!t.isAnimating){const s=+(e.getAttribute(this,q)||0);this&&!e.hasClass(this,m.activeClass)&&!Number.isNaN(s)&&t.to(s)}}function F(i){i.preventDefault();const o=e.closest(this,y)||I.getTargetElement(this),t=g(o);if(t&&!t.isAnimating){const s=e.getAttribute(this,p);s==="next"?t.next():s==="prev"&&t.prev()}}const G=({code:i,target:o})=>{const t=e.getDocument(o),[s]=[...e.querySelectorAll(y,t)].filter(a=>e.isElementInScrollRange(a)),n=g(s);if(n&&!n.isAnimating&&!/textarea|input/i.test(o.nodeName)){const a=e.isRTL(s),c=a?e.keyArrowLeft:e.keyArrowRight,l=a?e.keyArrowRight:e.keyArrowLeft;i===l?n.prev():i===c&&n.next()}};function B(i){const{target:o}=i,t=g(this);t&&t.isTouch&&(t.indicator&&!t.indicator.contains(o)||!t.controls.includes(o))&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())}function J(i){const{target:o}=i,t=g(this);if(t&&!t.isAnimating&&!t.isTouch){const{controls:s,indicators:n}=t;[...s,...n].every(a=>a===o||a.contains(o))||(x=i.pageX,this.contains(o)&&(t.isTouch=!0,O(t,!0)))}}const Q=i=>{S=i.pageX},V=i=>{var n;const{target:o}=i,t=e.getDocument(o),s=[...e.querySelectorAll(y,t)].map(a=>g(a)).find(a=>a.isTouch);if(s){const{element:a,index:c}=s,l=e.isRTL(a);P=i.pageX,s.isTouch=!1,O(s),!((n=t.getSelection())!=null&&n.toString().length)&&a.contains(o)&&Math.abs(x-P)>120&&(S<x?s.to(c+(l?-1:1)):S>x&&s.to(c+(l?1:-1))),x=0,S=0,P=0}},H=(i,o)=>{const{indicators:t}=i;[...t].forEach(s=>e.removeClass(s,m.activeClass)),i.indicators[o]&&e.addClass(t[o],m.activeClass)},O=(i,o)=>{const{element:t}=i,s=o?L.addListener:L.removeListener;s(e.getDocument(t),e.pointermoveEvent,Q,e.passiveHandler),s(e.getDocument(t),e.pointerupEvent,V,e.passiveHandler)},R=i=>{const{slides:o,element:t}=i,s=e.querySelector(`.${h}.${m.activeClass}`,t);return e.isHTMLElement(s)?[...o].indexOf(s):-1};class $ extends M.BaseComponent{constructor(t,s){super(t,s);E(this,"_toggleEventListeners",t=>{const{element:s,options:n,slides:a,controls:c,indicators:l}=this,{touch:r,pause:u,interval:f,keyboard:v}=n,d=t?L.addListener:L.removeListener;u&&f&&(d(s,e.mouseenterEvent,j),d(s,e.mouseleaveEvent,U)),r&&a.length>2&&(d(s,e.pointerdownEvent,J,e.passiveHandler),d(s,e.touchstartEvent,B,{passive:!1}),d(s,e.dragstartEvent,B,{passive:!1})),c.length&&c.forEach(A=>{A&&d(A,e.mouseclickEvent,F)}),l.length&&l.forEach(A=>{d(A,e.mouseclickEvent,z)}),v&&d(e.getDocument(s),e.keydownEvent,G)});const{element:n}=this;this.direction=e.isRTL(n)?"right":"left",this.isTouch=!1,this.slides=e.getElementsByClassName(h,n);const{slides:a}=this;if(a.length>=2){const c=R(this),l=[...a].find(f=>e.matches(f,`.${h}-next,.${h}-next`));this.index=c;const r=e.getDocument(n);this.controls=[...e.querySelectorAll(`[${p}]`,n),...e.querySelectorAll(`[${p}][${I.dataBsTarget}="#${n.id}"]`,r)].filter((f,v,d)=>v===d.indexOf(f)),this.indicator=e.querySelector(`.${T}-indicators`,n),this.indicators=[...this.indicator?e.querySelectorAll(`[${q}]`,this.indicator):[],...e.querySelectorAll(`[${q}][${I.dataBsTarget}="#${n.id}"]`,r)].filter((f,v,d)=>v===d.indexOf(f));const{options:u}=this;this.options.interval=u.interval===!0?w.interval:u.interval,l?this.index=[...a].indexOf(l):c<0&&(this.index=0,e.addClass(a[0],m.activeClass),this.indicators.length&&H(this,0)),this.indicators.length&&H(this,this.index),this._toggleEventListeners(!0),u.interval&&this.cycle()}}get name(){return N}get defaults(){return w}get isPaused(){return e.hasClass(this.element,C)}get isAnimating(){return e.querySelector(`.${h}-next,.${h}-prev`,this.element)!==null}cycle(){const{element:t,options:s,isPaused:n,index:a}=this;e.Timer.clear(t,T),n&&(e.Timer.clear(t,C),e.removeClass(t,C)),e.Timer.set(t,()=>{this.element&&!this.isPaused&&!this.isTouch&&e.isElementInScrollRange(t)&&this.to(a+1)},s.interval,T)}pause(){const{element:t,options:s}=this;!this.isPaused&&s.interval&&(e.addClass(t,C),e.Timer.set(t,()=>{},1,C))}next(){this.isAnimating||this.to(this.index+1)}prev(){this.isAnimating||this.to(this.index-1)}to(t){const{element:s,slides:n,options:a}=this,c=R(this),l=e.isRTL(s);let r=t;if(!this.isAnimating&&c!==r&&!e.Timer.get(s,p)){c<r||c===0&&r===n.length-1?this.direction=l?"right":"left":(c>r||c===n.length-1&&r===0)&&(this.direction=l?"left":"right");const{direction:u}=this;r<0?r=n.length-1:r>=n.length&&(r=0);const f=u==="left"?"next":"prev",v=u==="left"?"start":"end",d={relatedTarget:n[r],from:c,to:r,direction:u};e.ObjectAssign(b,d),e.ObjectAssign(D,d),e.dispatchEvent(s,b),b.defaultPrevented||(this.index=r,H(this,r),e.getElementTransitionDuration(n[r])&&e.hasClass(s,"slide")?e.Timer.set(s,()=>{e.addClass(n[r],`${h}-${f}`),e.reflow(n[r]),e.addClass(n[r],`${h}-${v}`),e.addClass(n[c],`${h}-${v}`),e.emulateTransitionEnd(n[r],()=>this.slides&&this.slides.length&&k(this))},0,p):(e.addClass(n[r],m.activeClass),e.removeClass(n[c],m.activeClass),e.Timer.set(s,()=>{e.Timer.clear(s,p),s&&a.interval&&!this.isPaused&&this.cycle(),e.dispatchEvent(s,D)},0,p)))}}dispose(){const{isAnimating:t}=this,s={...this,isAnimating:t};this._toggleEventListeners(),super.dispose(),s.isAnimating&&e.emulateTransitionEnd(s.slides[s.index],()=>{k(s)})}}E($,"selector",y),E($,"init",_),E($,"getInstance",g);module.exports=$;
//# sourceMappingURL=carousel.cjs.map
