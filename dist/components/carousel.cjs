"use strict";const e=require("./base-component-D3rSrWwH.js"),y=require("./event-listener-W3RGkfJ6.js"),f=require("./activeClass-CxJYQAGN.js"),A=require("./getTargetElement-DOtJ4BXO.js"),C="carousel",w="Carousel",E=`[data-bs-ride="${C}"]`,u=`${C}-item`,b="data-bs-slide-to",v="data-bs-slide",p="paused",L={pause:"hover",keyboard:!1,touch:!0,interval:5e3},m=i=>e.getInstance(i,w),N=i=>new B(i);let T=0,$=0,S=0;const I=e.createCustomEvent(`slide.bs.${C}`),H=e.createCustomEvent(`slid.bs.${C}`),q=i=>{const{index:n,direction:t,element:s,slides:o,options:r}=i;if(i.isAnimating){const l=D(i),a=t==="left"?"next":"prev",d=t==="left"?"start":"end";e.addClass(o[n],f.activeClass),e.removeClass(o[n],`${u}-${a}`),e.removeClass(o[n],`${u}-${d}`),e.removeClass(o[l],f.activeClass),e.removeClass(o[l],`${u}-${d}`),e.dispatchEvent(s,H),e.Timer.clear(s,v),i.cycle&&!e.getDocument(s).hidden&&r.interval&&!i.isPaused&&i.cycle()}};function O(){const i=m(this);i&&!i.isPaused&&!e.Timer.get(this,p)&&e.addClass(this,p)}function X(){const i=m(this);i&&i.isPaused&&!e.Timer.get(this,p)&&i.cycle()}function K(i){i.preventDefault();const n=e.closest(this,E)||A.getTargetElement(this),t=m(n);if(t&&!t.isAnimating){const s=+(e.getAttribute(this,b)||0);this&&!e.hasClass(this,f.activeClass)&&!Number.isNaN(s)&&t.to(s)}}function M(i){i.preventDefault();const n=e.closest(this,E)||A.getTargetElement(this),t=m(n);if(t&&!t.isAnimating){const s=e.getAttribute(this,v);s==="next"?t.next():s==="prev"&&t.prev()}}const _=({code:i,target:n})=>{const t=e.getDocument(n),[s]=[...e.querySelectorAll(E,t)].filter(r=>e.isElementInScrollRange(r)),o=m(s);if(o&&!o.isAnimating&&!/textarea|input/i.test(n.nodeName)){const r=e.isRTL(s),l=r?e.keyArrowLeft:e.keyArrowRight,a=r?e.keyArrowRight:e.keyArrowLeft;i===a?o.prev():i===l&&o.next()}};function R(i){const{target:n}=i,t=m(this);t&&t.isTouch&&(t.indicator&&!t.indicator.contains(n)||!t.controls.includes(n))&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())}function j(i){const{target:n}=i,t=m(this);if(t&&!t.isAnimating&&!t.isTouch){const{controls:s,indicators:o}=t;[...s,...o].every(r=>r===n||r.contains(n))||(T=i.pageX,this.contains(n)&&(t.isTouch=!0,k(t,!0)))}}const U=i=>{$=i.pageX},z=i=>{const{target:n}=i,t=e.getDocument(n),s=[...e.querySelectorAll(E,t)].map(o=>m(o)).find(o=>o.isTouch);if(s){const{element:o,index:r}=s,l=e.isRTL(o);S=i.pageX,s.isTouch=!1,k(s),!t.getSelection()?.toString().length&&o.contains(n)&&Math.abs(T-S)>120&&($<T?s.to(r+(l?-1:1)):$>T&&s.to(r+(l?1:-1))),T=0,$=0,S=0}},P=(i,n)=>{const{indicators:t}=i;[...t].forEach(s=>e.removeClass(s,f.activeClass)),i.indicators[n]&&e.addClass(t[n],f.activeClass)},k=(i,n)=>{const{element:t}=i,s=n?y.E:y.r;s(e.getDocument(t),e.pointermoveEvent,U,e.passiveHandler),s(e.getDocument(t),e.pointerupEvent,z,e.passiveHandler)},D=i=>{const{slides:n,element:t}=i,s=e.querySelector(`.${u}.${f.activeClass}`,t);return e.isHTMLElement(s)?[...n].indexOf(s):-1};class B extends e.BaseComponent{static selector=E;static init=N;static getInstance=m;constructor(n,t){super(n,t);const{element:s}=this;this.direction=e.isRTL(s)?"right":"left",this.isTouch=!1,this.slides=e.getElementsByClassName(u,s);const{slides:o}=this;if(o.length>=2){const r=D(this),l=[...o].find(h=>e.matches(h,`.${u}-next,.${u}-next`));this.index=r;const a=e.getDocument(s);this.controls=[...e.querySelectorAll(`[${v}]`,s),...e.querySelectorAll(`[${v}][${A.dataBsTarget}="#${s.id}"]`,a)].filter((h,g,c)=>g===c.indexOf(h)),this.indicator=e.querySelector(`.${C}-indicators`,s),this.indicators=[...this.indicator?e.querySelectorAll(`[${b}]`,this.indicator):[],...e.querySelectorAll(`[${b}][${A.dataBsTarget}="#${s.id}"]`,a)].filter((h,g,c)=>g===c.indexOf(h));const{options:d}=this;this.options.interval=d.interval===!0?L.interval:d.interval,l?this.index=[...o].indexOf(l):r<0&&(this.index=0,e.addClass(o[0],f.activeClass),this.indicators.length&&P(this,0)),this.indicators.length&&P(this,this.index),this._toggleEventListeners(!0),d.interval&&this.cycle()}}get name(){return w}get defaults(){return L}get isPaused(){return e.hasClass(this.element,p)}get isAnimating(){return e.querySelector(`.${u}-next,.${u}-prev`,this.element)!==null}cycle(){const{element:n,options:t,isPaused:s,index:o}=this;e.Timer.clear(n,C),s&&(e.Timer.clear(n,p),e.removeClass(n,p)),e.Timer.set(n,()=>{this.element&&!this.isPaused&&!this.isTouch&&e.isElementInScrollRange(n)&&this.to(o+1)},t.interval,C)}pause(){const{element:n,options:t}=this;!this.isPaused&&t.interval&&(e.addClass(n,p),e.Timer.set(n,()=>{},1,p))}next(){this.isAnimating||this.to(this.index+1)}prev(){this.isAnimating||this.to(this.index-1)}to(n){const{element:t,slides:s,options:o}=this,r=D(this),l=e.isRTL(t);let a=n;if(!this.isAnimating&&r!==a&&!e.Timer.get(t,v)){r<a||r===0&&a===s.length-1?this.direction=l?"right":"left":(r>a||r===s.length-1&&a===0)&&(this.direction=l?"left":"right");const{direction:d}=this;a<0?a=s.length-1:a>=s.length&&(a=0);const h=d==="left"?"next":"prev",g=d==="left"?"start":"end",c={relatedTarget:s[a],from:r,to:a,direction:d};e.ObjectAssign(I,c),e.ObjectAssign(H,c),e.dispatchEvent(t,I),I.defaultPrevented||(this.index=a,P(this,a),e.getElementTransitionDuration(s[a])&&e.hasClass(t,"slide")?e.Timer.set(t,()=>{e.addClass(s[a],`${u}-${h}`),e.reflow(s[a]),e.addClass(s[a],`${u}-${g}`),e.addClass(s[r],`${u}-${g}`),e.emulateTransitionEnd(s[a],()=>this.slides&&this.slides.length&&q(this))},0,v):(e.addClass(s[a],f.activeClass),e.removeClass(s[r],f.activeClass),e.Timer.set(t,()=>{e.Timer.clear(t,v),t&&o.interval&&!this.isPaused&&this.cycle(),e.dispatchEvent(t,H)},0,v)))}}_toggleEventListeners=n=>{const{element:t,options:s,slides:o,controls:r,indicators:l}=this,{touch:a,pause:d,interval:h,keyboard:g}=s,c=n?y.E:y.r;d&&h&&(c(t,e.mouseenterEvent,O),c(t,e.mouseleaveEvent,X)),a&&o.length>2&&(c(t,e.pointerdownEvent,j,e.passiveHandler),c(t,e.touchstartEvent,R,{passive:!1}),c(t,e.dragstartEvent,R,{passive:!1})),r.length&&r.forEach(x=>{x&&c(x,e.mouseclickEvent,M)}),l.length&&l.forEach(x=>{c(x,e.mouseclickEvent,K)}),g&&c(e.getDocument(t),e.keydownEvent,_)};dispose(){const{isAnimating:n}=this,t={...this,isAnimating:n};this._toggleEventListeners(),super.dispose(),t.isAnimating&&e.emulateTransitionEnd(t.slides[t.index],()=>{q(t)})}}module.exports=B;
//# sourceMappingURL=carousel.cjs.map
