"use strict";const t=require("./base-component-DaZCwW-u.js"),P=require("./event-listener-BQdA_KAC.js"),u=require("./activeClass-CxJYQAGN.js"),q=require("./getTargetElement-CXAsWuzD.js"),x="carousel",N="Carousel",y=`[data-bs-ride="${x}"]`,h=`${x}-item`,A="data-bs-slide-to",m="data-bs-slide",p="paused",R={pause:"hover",keyboard:!1,touch:!0,interval:5e3},g=i=>t.to(i,N),k=i=>new X(i);let $=0,T=0,E=0;const b=t.vo(`slide.bs.${x}`),H=t.vo(`slid.bs.${x}`),S=i=>{const{index:n,direction:e,element:s,slides:o,options:c}=i;if(i.isAnimating){const r=D(i),a=e==="left"?"next":"prev",d=e==="left"?"start":"end";t.qn(o[n],u.activeClass),t.Zn(o[n],`${h}-${a}`),t.Zn(o[n],`${h}-${d}`),t.Zn(o[r],u.activeClass),t.Zn(o[r],`${h}-${d}`),t.q(s,H),t.yo.clear(s,m),i.cycle&&!t.d(s).hidden&&c.interval&&!i.isPaused&&i.cycle()}};function w(){const i=g(this);i&&!i.isPaused&&!t.yo.get(this,p)&&t.qn(this,p)}function B(){const i=g(this);i&&i.isPaused&&!t.yo.get(this,p)&&i.cycle()}function U(i){i.preventDefault();const n=t.ke(this,y)||q.getTargetElement(this),e=g(n);if(e&&!e.isAnimating){const s=+(t.j(this,A)||0);this&&!t.Yn(this,u.activeClass)&&!Number.isNaN(s)&&e.to(s)}}function O(i){i.preventDefault();const n=t.ke(this,y)||q.getTargetElement(this),e=g(n);if(e&&!e.isAnimating){const s=t.j(this,m);s==="next"?e.next():s==="prev"&&e.prev()}}const j=({code:i,target:n})=>{const e=t.d(n),[s]=[...t.de(y,e)].filter(c=>t.Do(c)),o=g(s);if(o&&!o.isAnimating&&!/textarea|input/i.test(n.nodeName)){const c=t.Uo(s),r=c?t.rn:t.cn,a=c?t.cn:t.rn;i===a?o.prev():i===r&&o.next()}};function L(i){const{target:n}=i,e=g(this);e&&e.isTouch&&(e.indicator&&!e.indicator.contains(n)||!e.controls.includes(n))&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())}function K(i){const{target:n}=i,e=g(this);if(e&&!e.isAnimating&&!e.isTouch){const{controls:s,indicators:o}=e;[...s,...o].every(c=>c===n||c.contains(n))||($=i.pageX,this.contains(n)&&(e.isTouch=!0,Z(e,!0)))}}const Y=i=>{T=i.pageX},_=i=>{const{target:n}=i,e=t.d(n),s=[...t.de(y,e)].map(o=>g(o)).find(o=>o.isTouch);if(s){const{element:o,index:c}=s,r=t.Uo(o);E=i.pageX,s.isTouch=!1,Z(s),!e.getSelection()?.toString().length&&o.contains(n)&&Math.abs($-E)>120&&(T<$?s.to(c+(r?-1:1)):T>$&&s.to(c+(r?1:-1))),$=0,T=0,E=0}},I=(i,n)=>{const{indicators:e}=i;[...e].forEach(s=>t.Zn(s,u.activeClass)),i.indicators[n]&&t.qn(e[n],u.activeClass)},Z=(i,n)=>{const{element:e}=i,s=n?P.E:P.r;s(t.d(e),t.xt,Y,t.bo),s(t.d(e),t.zt,_,t.bo)},D=i=>{const{slides:n,element:e}=i,s=t.Ro(`.${h}.${u.activeClass}`,e);return t.m(s)?[...n].indexOf(s):-1};class X extends t.BaseComponent{static selector=y;static init=k;static getInstance=g;constructor(n,e){super(n,e);const{element:s}=this;this.direction=t.Uo(s)?"right":"left",this.isTouch=!1,this.slides=t.Go(h,s);const{slides:o}=this;if(o.length>=2){const c=D(this),r=[...o].find(f=>t.Ee(f,`.${h}-next,.${h}-next`));this.index=c;const a=t.d(s);this.controls=[...t.de(`[${m}]`,s),...t.de(`[${m}][${q.dataBsTarget}="#${s.id}"]`,a)].filter((f,v,l)=>v===l.indexOf(f)),this.indicator=t.Ro(`.${x}-indicators`,s),this.indicators=[...this.indicator?t.de(`[${A}]`,this.indicator):[],...t.de(`[${A}][${q.dataBsTarget}="#${s.id}"]`,a)].filter((f,v,l)=>v===l.indexOf(f));const{options:d}=this;this.options.interval=d.interval===!0?R.interval:d.interval,r?this.index=[...o].indexOf(r):c<0&&(this.index=0,t.qn(o[0],u.activeClass),this.indicators.length&&I(this,0)),this.indicators.length&&I(this,this.index),this._toggleEventListeners(!0),d.interval&&this.cycle()}}get name(){return N}get defaults(){return R}get isPaused(){return t.Yn(this.element,p)}get isAnimating(){return t.Ro(`.${h}-next,.${h}-prev`,this.element)!==null}cycle(){const{element:n,options:e,isPaused:s,index:o}=this;t.yo.clear(n,x),s&&(t.yo.clear(n,p),t.Zn(n,p)),t.yo.set(n,()=>{this.element&&!this.isPaused&&!this.isTouch&&t.Do(n)&&this.to(o+1)},e.interval,x)}pause(){const{element:n,options:e}=this;!this.isPaused&&e.interval&&(t.qn(n,p),t.yo.set(n,()=>{},1,p))}next(){this.isAnimating||this.to(this.index+1)}prev(){this.isAnimating||this.to(this.index-1)}to(n){const{element:e,slides:s,options:o}=this,c=D(this),r=t.Uo(e);let a=n;if(!this.isAnimating&&c!==a&&!t.yo.get(e,m)){c<a||c===0&&a===s.length-1?this.direction=r?"right":"left":(c>a||c===s.length-1&&a===0)&&(this.direction=r?"left":"right");const{direction:d}=this;a<0?a=s.length-1:a>=s.length&&(a=0);const f=d==="left"?"next":"prev",v=d==="left"?"start":"end",l={relatedTarget:s[a],from:c,to:a,direction:d};t.N(b,l),t.N(H,l),t.q(e,b),b.defaultPrevented||(this.index=a,I(this,a),t.ie(s[a])&&t.Yn(e,"slide")?t.yo.set(e,()=>{t.qn(s[a],`${h}-${f}`),t.Eo(s[a]),t.qn(s[a],`${h}-${v}`),t.qn(s[c],`${h}-${v}`),t.ro(s[a],()=>this.slides&&this.slides.length&&S(this))},0,m):(t.qn(s[a],u.activeClass),t.Zn(s[c],u.activeClass),t.yo.set(e,()=>{t.yo.clear(e,m),e&&o.interval&&!this.isPaused&&this.cycle(),t.q(e,H)},0,m)))}}_toggleEventListeners=n=>{const{element:e,options:s,slides:o,controls:c,indicators:r}=this,{touch:a,pause:d,interval:f,keyboard:v}=s,l=n?P.E:P.r;d&&f&&(l(e,t.yt,w),l(e,t.wt,B)),a&&o.length>2&&(l(e,t.Dt,K,t.bo),l(e,t.Rt,L,{passive:!1}),l(e,t.je,L,{passive:!1})),c.length&&c.forEach(C=>{C&&l(C,t.mt,O)}),r.length&&r.forEach(C=>{l(C,t.mt,U)}),v&&l(t.d(e),t.dt,j)};dispose(){const{isAnimating:n}=this,e={...this,isAnimating:n};this._toggleEventListeners(),super.dispose(),e.isAnimating&&t.ro(e.slides[e.index],()=>{S(e)})}}module.exports=X;
//# sourceMappingURL=carousel.cjs.map
