"use strict";var Et=Object.defineProperty;var bt=(s,i,o)=>i in s?Et(s,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[i]=o;var v=(s,i,o)=>(bt(s,typeof i!="symbol"?i+"":i,o),o);const t=require("@thednp/shorty"),O=require("@thednp/event-listener"),Ct=require("./dataBsToggle-c8bc9e7f.js"),et=require("./showClass-2174a6d6.js"),M=require("./popupContainer-edee469f.js"),nt=require("./fadeClass-a4944cf1.js"),Tt=require("./base-component-f3cef043.js"),Y="popover",it="Popover",y="tooltip",dt=s=>{const i=s===y,o=i?`${s}-inner`:`${s}-body`,e=i?"":`<h3 class="${s}-header"></h3>`,n=`<div class="${s}-arrow"></div>`,l=`<div class="${o}"></div>`;return`<div class="${s}" role="${y}">${e+n+l}</div>`},ht={top:"top",bottom:"bottom",left:"start",right:"end"},ot=s=>{const i=/\b(top|bottom|start|end)+/,{element:o,tooltip:e,container:n,options:l,arrow:r}=s;if(e){const m={...ht},f=t.isRTL(o);t.setElementStyle(e,{top:"",left:"",right:"",bottom:""});const c=s.name===it,{offsetWidth:d,offsetHeight:h}=e,{clientWidth:b,clientHeight:C,offsetWidth:B}=t.getDocumentElement(o);let{placement:a}=l;const{clientWidth:T,offsetWidth:w}=n,S=t.getElementStyle(n,"position")==="fixed",p=Math.abs(S?T-w:b-B),x=f&&S?p:0,$=b-(f?0:p)-1,{width:g,height:E,left:u,right:gt,top:D}=t.getBoundingClientRect(o,!0),{x:G,y:k}={x:u,y:D};t.setElementStyle(r,{top:"",left:"",right:"",bottom:""});let A=0,I="",L=0,V="",q="",J="",X="";const N=r.offsetWidth||0,H=r.offsetHeight||0,Z=N/2;let _=D-h-H<0,F=D+h+E+H>=C,z=u-d-N<x,j=u+d+g+N>=$;const K=["left","right"],tt=["top","bottom"];_=K.includes(a)?D+E/2-h/2-H<0:_,F=K.includes(a)?D+h/2+E/2+H>=C:F,z=tt.includes(a)?u+g/2-d/2<x:z,j=tt.includes(a)?u+d/2+g/2>=$:j,a=K.includes(a)&&z&&j?"top":a,a=a==="top"&&_?"bottom":a,a=a==="bottom"&&F?"top":a,a=a==="left"&&z?"right":a,a=a==="right"&&j?"left":a,e.className.includes(a)||(e.className=e.className.replace(i,m[a])),K.includes(a)?(a==="left"?L=G-d-(c?N:0):L=G+g+(c?N:0),_&&F?(A=0,I=0,q=D+E/2-H/2):_?(A=k,I="",q=E/2-N):F?(A=k-h+E,I="",q=h-E/2-N):(A=k-h/2+E/2,q=h/2-H/2)):tt.includes(a)&&(a==="top"?A=k-h-(c?H:0):A=k+E+(c?H:0),z?(L=0,J=G+g/2-Z):j?(L="auto",V=0,X=g/2+$-gt-Z):(L=G-d/2+g/2,J=d/2-Z)),t.setElementStyle(e,{top:`${A}px`,bottom:I===""?"":`${I}px`,left:L==="auto"?L:`${L}px`,right:V!==""?`${V}px`:""}),t.isHTMLElement(r)&&(q!==""&&(r.style.top=`${q}px`),J!==""?r.style.left=`${J}px`:X!==""&&(r.style.right=`${X}px`));const vt=t.createCustomEvent(`updated.bs.${t.toLowerCase(s.name)}`);t.dispatchEvent(o,vt)}},st={template:dt(y),title:"",customClass:"",trigger:"hover focus",placement:"top",sanitizeFn:void 0,animation:!0,delay:200,container:document.body,content:"",dismissible:!1,btnClose:""},pt="data-original-title",W="Tooltip",P=(s,i,o)=>{if(t.isString(i)&&i.length){let e=i.trim();t.isFunction(o)&&(e=o(e));const l=new DOMParser().parseFromString(e,"text/html");s.append(...l.body.childNodes)}else t.isHTMLElement(i)?s.append(i):(t.isNodeList(i)||t.isArray(i)&&i.every(t.isNode))&&s.append(...i)},wt=s=>{const i=s.name===W,{id:o,element:e,options:n}=s,{title:l,placement:r,template:m,animation:f,customClass:c,sanitizeFn:d,dismissible:h,content:b,btnClose:C}=n,B=i?y:Y,a={...ht};let T=[],w=[];t.isRTL(e)&&(a.left="end",a.right="start");const Q=`bs-${B}-${a[r]}`;let S;if(t.isHTMLElement(m))S=m;else{const x=t.createElement("div");P(x,m,d),S=x.firstChild}s.tooltip=t.isHTMLElement(S)?S.cloneNode(!0):void 0;const{tooltip:p}=s;if(p){t.setAttribute(p,"id",o),t.setAttribute(p,"role",y);const x=i?`${y}-inner`:`${Y}-body`,$=i?null:t.querySelector(`.${Y}-header`,p),g=t.querySelector(`.${x}`,p);s.arrow=t.querySelector(`.${B}-arrow`,p);const{arrow:E}=s;if(t.isHTMLElement(l))T=[l.cloneNode(!0)];else{const u=t.createElement("div");P(u,l,d),T=[...u.childNodes]}if(t.isHTMLElement(b))w=[b.cloneNode(!0)];else{const u=t.createElement("div");P(u,b,d),w=[...u.childNodes]}if(h)if(l)if(t.isHTMLElement(C))T=[...T,C.cloneNode(!0)];else{const u=t.createElement("div");P(u,C,d),T=[...T,u.firstChild]}else if($&&$.remove(),t.isHTMLElement(C))w=[...w,C.cloneNode(!0)];else{const u=t.createElement("div");P(u,C,d),w=[...w,u.firstChild]}i?l&&g&&P(g,l,d):(l&&$&&P($,T,d),b&&g&&P(g,w,d),s.btn=t.querySelector(".btn-close",p)||void 0),t.addClass(p,"position-fixed"),t.addClass(E,"position-absolute"),t.hasClass(p,B)||t.addClass(p,B),f&&!t.hasClass(p,nt.fadeClass)&&t.addClass(p,nt.fadeClass),c&&!t.hasClass(p,c)&&t.addClass(p,c),t.hasClass(p,Q)||t.addClass(p,Q)}},yt=s=>{const i=["HTML","BODY"],o=[];let{parentNode:e}=s;for(;e&&!i.includes(e.nodeName);)e=t.getParentNode(e),t.isShadowRoot(e)||t.isTableElement(e)||o.push(e);return o.find((n,l)=>t.getElementStyle(n,"position")!=="relative"&&o.slice(l+1).every(r=>t.getElementStyle(r,"position")==="static")?n:null)||t.getDocument(s).body},$t=`[${Ct.dataBsToggle}="${y}"],[data-tip="${y}"]`,mt="title";let lt=s=>t.getInstance(s,W);const Lt=s=>new R(s),Ht=s=>{const{element:i,tooltip:o,container:e,offsetParent:n}=s;t.removeAttribute(i,t.ariaDescribedBy),M.removePopup(o,e===n?e:n)},U=s=>{const{tooltip:i,container:o,offsetParent:e}=s;return i&&M.hasPopup(i,o===e?o:e)},Pt=(s,i)=>{const{element:o}=s;s._toggleEventListeners(),t.hasAttribute(o,pt)&&s.name===W&&ft(s),i&&i()},ut=(s,i)=>{const o=i?O.addListener:O.removeListener,{element:e}=s;o(t.getDocument(e),t.touchstartEvent,s.handleTouch,t.passiveHandler),[t.scrollEvent,t.resizeEvent].forEach(n=>{o(t.getWindow(e),n,s.update,t.passiveHandler)})},at=s=>{const{element:i}=s,o=t.createCustomEvent(`shown.bs.${t.toLowerCase(s.name)}`);ut(s,!0),t.dispatchEvent(i,o),t.Timer.clear(i,"in")},rt=s=>{const{element:i}=s,o=t.createCustomEvent(`hidden.bs.${t.toLowerCase(s.name)}`);ut(s),Ht(s),t.dispatchEvent(i,o),t.Timer.clear(i,"out")},ct=(s,i)=>{const o=i?O.addListener:O.removeListener,{element:e,container:n,offsetParent:l}=s,{offsetHeight:r,scrollHeight:m}=n,f=t.closest(e,`.${M.modalString}`),c=t.closest(e,`.${M.offcanvasString}`),d=t.getWindow(e),b=n===l&&r!==m?n:d;o(b,t.resizeEvent,s.update,t.passiveHandler),o(b,t.scrollEvent,s.update,t.passiveHandler),f&&o(f,`hide.bs.${M.modalString}`,s.handleHide),c&&o(c,`hide.bs.${M.offcanvasString}`,s.handleHide)},ft=(s,i)=>{const o=[pt,mt],{element:e}=s;t.setAttribute(e,o[i?0:1],i||t.getAttribute(e,o[0])||""),t.removeAttribute(e,o[i?1:0])};class R extends Tt.BaseComponent{constructor(o,e){super(o,e);v(this,"handleFocus",()=>t.focus(this.element));v(this,"handleShow",()=>this.show());v(this,"handleHide",()=>this.hide());v(this,"update",()=>{ot(this)});v(this,"toggle",()=>{const{tooltip:o}=this;o&&!U(this)?this.show():this.hide()});v(this,"handleTouch",({target:o})=>{const{tooltip:e,element:n}=this;e&&e.contains(o)||o===n||o&&n.contains(o)||this.hide()});v(this,"_toggleEventListeners",o=>{const e=o?O.addListener:O.removeListener,{element:n,options:l,btn:r}=this,{trigger:m}=l,c=!!(this.name!==W&&l.dismissible);m.includes("manual")||(this.enabled=!!o,m.split(" ").forEach(h=>{h===t.mousehoverEvent?(e(n,t.mousedownEvent,this.handleShow),e(n,t.mouseenterEvent,this.handleShow),c||(e(n,t.mouseleaveEvent,this.handleHide),e(t.getDocument(n),t.touchstartEvent,this.handleTouch,t.passiveHandler))):h===t.mouseclickEvent?e(n,h,c?this.handleShow:this.toggle):h===t.focusEvent&&(e(n,t.focusinEvent,this.handleShow),c||e(n,t.focusoutEvent,this.handleHide),t.isApple&&e(n,t.mouseclickEvent,this.handleFocus)),c&&r&&e(r,t.mouseclickEvent,this.handleHide)}))});const{element:n}=this,l=this.name===W,r=l?y:Y,m=l?W:it;lt=c=>t.getInstance(c,m),this.enabled=!0,this.id=`${r}-${t.getUID(n,r)}`;const{options:f}=this;!f.title&&l||!l&&!f.content||(t.ObjectAssign(st,{titleAttr:""}),t.hasAttribute(n,mt)&&l&&typeof f.title=="string"&&ft(this,f.title),this.container=yt(n),this.offsetParent=["sticky","fixed"].some(c=>t.getElementStyle(this.container,"position")===c)?this.container:t.getDocument(this.element).body,wt(this),this._toggleEventListeners(!0))}get name(){return W}get defaults(){return st}show(){const{options:o,tooltip:e,element:n,container:l,offsetParent:r,id:m}=this,{animation:f}=o,c=t.Timer.get(n,"out"),d=l===r?l:r;t.Timer.clear(n,"out"),e&&!c&&!U(this)&&t.Timer.set(n,()=>{const h=t.createCustomEvent(`show.bs.${t.toLowerCase(this.name)}`);t.dispatchEvent(n,h),h.defaultPrevented||(M.appendPopup(e,d),t.setAttribute(n,t.ariaDescribedBy,`#${m}`),this.update(),ct(this,!0),t.hasClass(e,et.showClass)||t.addClass(e,et.showClass),f?t.emulateTransitionEnd(e,()=>at(this)):at(this))},17,"in")}hide(){const{options:o,tooltip:e,element:n}=this,{animation:l,delay:r}=o;t.Timer.clear(n,"in"),e&&U(this)&&t.Timer.set(n,()=>{const m=t.createCustomEvent(`hide.bs.${t.toLowerCase(this.name)}`);t.dispatchEvent(n,m),m.defaultPrevented||(this.update(),t.removeClass(e,et.showClass),ct(this),l?t.emulateTransitionEnd(e,()=>rt(this)):rt(this))},r+17,"out")}enable(){const{enabled:o}=this;o||(this._toggleEventListeners(!0),this.enabled=!o)}disable(){const{tooltip:o,options:e,enabled:n}=this,{animation:l}=e;n&&(o&&U(this)&&l?(this.hide(),t.emulateTransitionEnd(o,()=>this._toggleEventListeners())):this._toggleEventListeners(),this.enabled=!n)}toggleEnabled(){this.enabled?this.disable():this.enable()}dispose(){const{tooltip:o,options:e}=this,n={...this,name:this.name},l=()=>setTimeout(()=>Pt(n,()=>super.dispose()),17);e.animation&&U(n)?(this.options.delay=0,this.hide(),t.emulateTransitionEnd(o,l)):l()}}v(R,"selector",$t),v(R,"init",Lt),v(R,"getInstance",lt),v(R,"styleTip",ot);exports.Tooltip=R;exports.getTipTemplate=dt;exports.popoverComponent=it;exports.popoverString=Y;exports.styleTip=ot;exports.tooltipDefaults=st;
//# sourceMappingURL=tooltip-ddfd360d.js.map
