"use strict";const t=require("./base-component-2e8b2d4a.cjs"),D=require("./event-listener-09f2aa63.cjs"),h=require("./showClass-2174a6d6.cjs"),g=require("./dataBsToggle-c8bc9e7f.cjs"),v=require("./dropdownClasses-c131c53f.cjs"),Z="Dropdown",G="dropdown-menu",J=o=>{const e=t.de(o,"A");return o.tagName==="A"&&t.hn(o,"href")&&o.href.slice(-1)==="#"||e&&t.hn(e,"href")&&e.href.slice(-1)==="#"},[p,T,b,B]=v.dropdownMenuClasses,S=`[${g.dataBsToggle}="${p}"],[${g.dataBsToggle}="${T}"],[${g.dataBsToggle}="${B}"],[${g.dataBsToggle}="${b}"]`,f=o=>t.Ln(o,Z),ot=o=>new X(o),st=`${G}-end`,k=[p,T],Q=[b,B],O=["A","BUTTON"],rt={offset:5,display:"dynamic"},M=t.Wn(`show.bs.${p}`),R=t.Wn(`shown.bs.${p}`),j=t.Wn(`hide.bs.${p}`),_=t.Wn(`hidden.bs.${p}`),V=o=>{const{element:e,menu:n,parentElement:s,options:i}=o,{offset:d}=i;if(t.E(n,"position")==="static")return;const r=t.po(e),c=t.kn(n,st);["margin","top","bottom","left","right"].forEach(l=>{const L={};L[l]="",t.qn(n,L)});let a=v.dropdownMenuClasses.find(l=>t.kn(s,l))||p;const Y={dropdown:[d,0,0],dropup:[0,0,d],dropstart:r?[-1,0,0,d]:[-1,d,0],dropend:r?[-1,d,0]:[-1,0,0,d]},m={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:r?{left:"100%",right:"auto"}:{left:"auto",right:"100%"},dropend:r?{left:"auto",right:"100%"}:{left:"100%",right:"auto"},menuStart:r?{right:"0",left:"auto"}:{right:"auto",left:"0"},menuEnd:r?{right:"auto",left:"0"}:{right:"0",left:"auto"}},{offsetWidth:w,offsetHeight:x}=n,{clientWidth:W,clientHeight:A}=t.k(e),{left:E,top:P,width:F,height:tt}=t.w(e),q=E-w-d<0,y=E+w+F+d>=W,et=P+x+d>=A,I=P+x+tt+d>=A,N=P-x-d<0,C=(!r&&c||r&&!c)&&E+F-w<0,$=(r&&c||!r&&!c)&&E+w>=W;if(Q.includes(a)&&q&&y&&(a=p),a===b&&(r?y:q)&&(a=B),a===B&&(r?q:y)&&(a=b),a===T&&N&&!I&&(a=p),a===p&&I&&!N&&(a=T),Q.includes(a)&&et&&t.q(m[a],{top:"auto",bottom:0}),k.includes(a)&&(C||$)){let l={left:"auto",right:"auto"};!C&&$&&!r&&(l={left:"auto",right:0}),C&&!$&&r&&(l={left:0,right:"auto"}),l&&t.q(m[a],l)}const nt=Y[a];if(t.qn(n,{...m[a],margin:`${nt.map(l=>l&&`${l}px`).join(" ")}`}),k.includes(a)&&c&&c){const l=!r&&C||r&&$?"menuStart":"menuEnd";t.qn(n,m[l])}},it=o=>[...o.children].map(e=>{if(e&&O.includes(e.tagName))return e;const{firstElementChild:n}=e;return n&&O.includes(n.tagName)?n:null}).filter(e=>e),z=o=>{const{element:e,options:n}=o,s=o.open?D.E:D.d,i=t.d(e);s(i,t.ut,U),s(i,t._,U),s(i,t.ct,ct),s(i,t.it,at),n.display==="dynamic"&&[t.xt,t.Lt].forEach(d=>{s(t.$n(e),d,lt,t.Rn)})},K=(o,e)=>{(e?D.E:D.d)(o.element,t.ut,dt)},H=o=>{const e=[...v.dropdownMenuClasses,"btn-group","input-group"].map(n=>t.ho(`${n} ${h.showClass}`,t.d(o))).find(n=>n.length);if(e&&e.length)return[...e[0].children].find(n=>v.dropdownMenuClasses.some(s=>s===t.Zt(n,g.dataBsToggle)))},U=o=>{const{target:e,type:n}=o;if(!e||!e.closest)return;const s=H(e),i=s&&f(s);if(!i)return;const{parentElement:d,menu:r}=i,c=t.de(e,S)!==null,u=d&&d.contains(e)&&(e.tagName==="form"||t.de(e,"form")!==null);n===t.ut&&J(e)&&o.preventDefault(),!(n===t._&&(e===s||e===r||r.contains(e)))&&(u||c||i&&i.hide())},dt=o=>{const{target:e}=o,n=e&&t.de(e,S),s=n&&f(n);s&&(o.stopImmediatePropagation(),s.toggle(),n&&J(n)&&o.preventDefault())},ct=o=>{[t.He,t.Pe].includes(o.code)&&o.preventDefault()};function at(o){const{code:e}=o,n=H(this),s=n&&f(n),{activeElement:i}=n&&t.d(n);if(!s||!i)return;const{menu:d,open:r}=s,c=it(d);if(c&&c.length&&[t.He,t.Pe].includes(e)){let u=c.indexOf(i);i===n?u=0:e===t.Pe?u=u>1?u-1:0:e===t.He&&(u=u<c.length-1?u+1:u),c[u]&&t.Bn(c[u])}t.je===e&&r&&(s.toggle(),t.Bn(n))}function lt(){const o=H(this),e=o&&f(o);e&&e.open&&V(e)}class X extends t.BaseComponent{static selector=S;static init=ot;static getInstance=f;constructor(e,n){super(e,n);const{parentElement:s}=this.element;this.parentElement=s,this.menu=t.go(`.${G}`,s),K(this,!0)}get name(){return Z}get defaults(){return rt}toggle(){this.open?this.hide():this.show()}show(){const{element:e,open:n,menu:s,parentElement:i}=this;if(n)return;const d=H(e),r=d&&f(d);r&&r.hide(),[M,R].forEach(c=>{c.relatedTarget=e}),t.Q(i,M),!M.defaultPrevented&&(t.Mn(s,h.showClass),t.Mn(i,h.showClass),t.F(e,t.Ee,"true"),V(this),this.open=!n,t.Bn(e),z(this),t.Q(i,R))}hide(){const{element:e,open:n,menu:s,parentElement:i}=this;!n||([j,_].forEach(d=>{d.relatedTarget=e}),t.Q(i,j),!j.defaultPrevented&&(t.Nn(s,h.showClass),t.Nn(i,h.showClass),t.F(e,t.Ee,"false"),this.open=!n,z(this),t.Q(i,_)))}dispose(){this.open&&this.hide(),K(this),super.dispose()}}module.exports=X;
//# sourceMappingURL=dropdown.cjs.map
