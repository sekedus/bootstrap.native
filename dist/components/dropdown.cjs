"use strict";const t=require("./base-component-CEXwoid1.js"),h=require("./showClass-D_Ms1FgG.js"),Q=require("./dataBsToggle-Dj-Ng54N.js"),C=require("./dropdownClasses-CnEyz_iw.js"),nt=require("./isDisabled-CST_xG4K.js"),U="Dropdown",Y="dropdown-menu",Z=o=>{const e=t.ke(o,"A");return o.tagName==="A"&&t.oe(o,"href")&&t.j(o,"href")?.slice(-1)==="#"||e&&t.oe(e,"href")&&t.j(e,"href")?.slice(-1)==="#"},[p,S,A,H]=C.dropdownMenuClasses,z=`[${Q.dataBsToggle}="${p}"]`,f=o=>t.to(o,U),ot=o=>new J(o),st=`${Y}-end`,_=[p,S],k=[A,H],B=["A","BUTTON"],rt={offset:5,display:"dynamic"},y=t.mo(`show.bs.${p}`),F=t.mo(`shown.bs.${p}`),T=t.mo(`hide.bs.${p}`),L=t.mo(`hidden.bs.${p}`),K=t.mo(`updated.bs.${p}`),R=o=>{const{element:e,menu:n,parentElement:i,options:r}=o,{offset:s}=r;if(t.g(n,"position")!=="static"){const d=t.Uo(e),c=t.Zn(n,st);["margin","top","bottom","left","right"].forEach(a=>{const O={};O[a]="",t.Eo(n,O)});let l=C.dropdownMenuClasses.find(a=>t.Zn(i,a))||p;const V={dropdown:[s,0,0],dropup:[0,0,s],dropstart:d?[-1,0,0,s]:[-1,s,0],dropend:d?[-1,s,0]:[-1,0,0,s]},g={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:d?{left:"100%",right:"auto"}:{left:"auto",right:"100%"},dropend:d?{left:"auto",right:"100%"}:{left:"100%",right:"auto"},menuStart:d?{right:"0",left:"auto"}:{right:"auto",left:"0"},menuEnd:d?{right:"auto",left:"0"}:{right:"0",left:"auto"}},{offsetWidth:m,offsetHeight:D}=n,{clientWidth:I,clientHeight:M}=t.S(e),{left:w,top:q,width:P,height:X}=t.w(e),$=w-m-s<0,x=w+m+P+s>=I,tt=q+D+s>=M,N=q+D+X+s>=M,j=q-D-s<0,E=(!d&&c||d&&!c)&&w+P-m<0,v=(d&&c||!d&&!c)&&w+m>=I;if(k.includes(l)&&$&&x&&(l=p),l===A&&(d?x:$)&&(l=H),l===H&&(d?$:x)&&(l=A),l===S&&j&&!N&&(l=p),l===p&&N&&!j&&(l=S),k.includes(l)&&tt&&t.N(g[l],{top:"auto",bottom:0}),_.includes(l)&&(E||v)){let a={left:"auto",right:"auto"};!E&&v&&!d&&(a={left:"auto",right:0}),E&&!v&&d&&(a={left:0,right:"auto"}),a&&t.N(g[l],a)}const et=V[l];if(t.Eo(n,{...g[l],margin:`${et.map(a=>a&&`${a}px`).join(" ")}`}),_.includes(l)&&c&&c){const a=!d&&E||d&&v?"menuStart":"menuEnd";t.Eo(n,g[a])}t.q(i,K)}},it=o=>Array.from(o.children).map(e=>{if(e&&B.includes(e.tagName))return e;const{firstElementChild:n}=e;return n&&B.includes(n.tagName)?n:null}).filter(e=>e),W=o=>{const{element:e,options:n,menu:i}=o,r=o.open?t.E:t.r,s=t.d(e);r(s,t.vt,G),r(s,t.ct,G),r(s,t.ft,ct),r(s,t.gt,lt),n.display==="dynamic"&&(o.open?o._observer.observe(i):o._observer.disconnect())},b=o=>{const e=[...C.dropdownMenuClasses,"btn-group","input-group"].map(n=>t.Go(`${n} ${h.showClass}`,t.d(o))).find(n=>n.length);if(e&&e.length)return[...e[0].children].find(n=>C.dropdownMenuClasses.some(i=>i===t.j(n,Q.dataBsToggle)))},G=o=>{const{target:e,type:n}=o;if(!t.m(e))return;const i=b(e),r=i&&f(i);if(!r)return;const{parentElement:s,menu:d}=r,c=s&&s.contains(e)&&(e.tagName==="form"||t.ke(e,"form")!==null);[t.vt,t.Et].includes(n)&&Z(e)&&o.preventDefault(),!c&&n!==t.ct&&e!==i&&e!==d&&r.hide()},dt=o=>{const{target:e}=o,n=e&&t.ke(e,z),i=n&&f(n);i&&(o.stopPropagation(),i.toggle(),n&&Z(n)&&o.preventDefault())},ct=o=>{[t.on,t.sn].includes(o.code)&&o.preventDefault()};function lt(o){const{code:e}=o,n=b(this);if(!n)return;const i=f(n),{activeElement:r}=t.d(n);if(!i||!r)return;const{menu:s,open:d}=i,c=it(s);if(c&&c.length&&[t.on,t.sn].includes(e)){let u=c.indexOf(r);r===n?u=0:e===t.sn?u=u>1?u-1:0:e===t.on&&(u=u<c.length-1?u+1:u),c[u]&&t.ao(c[u])}t.gn===e&&d&&(i.toggle(),t.ao(n))}function at(o){const e=b(o),n=e&&f(e);n&&n.open&&R(n)}class J extends t.BaseComponent{static selector=z;static init=ot;static getInstance=f;constructor(e,n){super(e,n);const{parentElement:i}=this.element,[r]=t.Go(Y,i);r&&(this.parentElement=i,this.menu=r,this._observer=new IntersectionObserver(([s])=>at(s.target),{threshold:1}),this._toggleEventListeners(!0))}get name(){return U}get defaults(){return rt}toggle(){this.open?this.hide():this.show()}show(){const{element:e,open:n,menu:i,parentElement:r}=this;if(n)return;const s=b(e),d=s&&f(s);d&&d.hide(),[y,F,K].forEach(c=>{c.relatedTarget=e}),t.q(r,y),!y.defaultPrevented&&(t.qn(i,h.showClass),t.qn(r,h.showClass),t.Qn(e,t.Oe,"true"),R(this),this.open=!n,t.ao(e),W(this),t.q(r,F))}hide(){const{element:e,open:n,menu:i,parentElement:r}=this;n&&([T,L].forEach(s=>{s.relatedTarget=e}),t.q(r,T),!T.defaultPrevented&&(t.Yn(i,h.showClass),t.Yn(r,h.showClass),t.Qn(e,t.Oe,"false"),this.open=!n,W(this),t.q(r,L)))}_toggleEventListeners=e=>{const n=e?t.E:t.r;nt.isDisabled(this.element)||n(this.element,t.vt,dt)};dispose(){this.open&&this.hide(),this._toggleEventListeners(),super.dispose()}}module.exports=J;
//# sourceMappingURL=dropdown.cjs.map
