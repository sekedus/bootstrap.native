{"version":3,"file":"getElementContainer.cjs","sources":["../../src/util/getElementContainer.ts"],"sourcesContent":["import { getDocumentBody, isShadowRoot, isTableElement, getParentNode, getElementStyle } from '@thednp/shorty';\n\n/**\n * Returns an `HTMLElement` to be used as default value for *options.container*\n * for `Tooltip` / `Popover` components.\n *\n * @see https://github.com/floating-ui/floating-ui\n *\n * @param element the target\n * @returns the query result\n */\nconst getElementContainer = (element: HTMLElement): ParentNode => {\n  const majorBlockTags = ['HTML', 'BODY'];\n  const containers: ParentNode[] = [];\n  let { parentNode } = element as Node;\n\n  while (parentNode && !majorBlockTags.includes(parentNode.nodeName)) {\n    parentNode = getParentNode(parentNode) as ParentNode;\n    /* istanbul ignore else */\n    if (!(isShadowRoot(parentNode) || isTableElement(parentNode))) {\n      containers.push(parentNode);\n    }\n  }\n\n  return (\n    containers.find((c, i) => {\n      if (\n        getElementStyle(c as HTMLElement, 'position') !== 'relative' &&\n        containers.slice(i + 1).every(r => getElementStyle(r as HTMLElement, 'position') === 'static')\n      ) {\n        return c;\n      }\n      return null;\n    }) || getDocumentBody(element)\n  );\n};\n\nexport default getElementContainer;\n"],"names":["getElementContainer","element","majorBlockTags","containers","parentNode","getParentNode","isShadowRoot","isTableElement","c","i","getElementStyle","r","getDocumentBody"],"mappings":"sDAWMA,EAAuBC,GAAqC,CAC1D,MAAAC,EAAiB,CAAC,OAAQ,MAAM,EAChCC,EAA2B,CAAA,EAC7B,GAAA,CAAE,WAAAC,CAAe,EAAAH,EAErB,KAAOG,GAAc,CAACF,EAAe,SAASE,EAAW,QAAQ,GAC/DA,EAAaC,EAAAA,GAAcD,CAAU,EAE/BE,EAAa,GAAAF,CAAU,GAAKG,EAAAA,GAAeH,CAAU,GACzDD,EAAW,KAAKC,CAAU,EAI9B,OACED,EAAW,KAAK,CAACK,EAAGC,IAEhBC,EAAAA,EAAgBF,EAAkB,UAAU,IAAM,YAClDL,EAAW,MAAMM,EAAI,CAAC,EAAE,MAAWE,GAAAD,EAAAA,EAAgBC,EAAkB,UAAU,IAAM,QAAQ,EAEtFH,EAEF,IACR,GAAKI,EAAAA,GAAgBX,CAAO,CAEjC"}