"use strict";var bt=Object.defineProperty;var Et=(o,i,s)=>i in o?bt(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s;var v=(o,i,s)=>Et(o,typeof i!="symbol"?i+"":i,s);const t=require("@thednp/shorty"),O=require("@thednp/event-listener"),Ct=require("./dataBsToggle-Dj-Ng54N.js"),et=require("./showClass-D_Ms1FgG.js"),M=require("./popupContainer-DIlSFkzD.js"),nt=require("./fadeClass-Co6nOzNJ.js"),Tt=require("./base-component-DBcDoOjV.js"),Y="popover",it="Popover",y="tooltip",dt=o=>{const i=o===y,s=i?`${o}-inner`:`${o}-body`,e=i?"":`<h3 class="${o}-header"></h3>`,n=`<div class="${o}-arrow"></div>`,l=`<div class="${s}"></div>`;return`<div class="${o}" role="${y}">${e+n+l}</div>`},ht={top:"top",bottom:"bottom",left:"start",right:"end"},ot=o=>{const i=/\b(top|bottom|start|end)+/,{element:s,tooltip:e,container:n,options:l,arrow:r}=o;// istanbul ignore else @preserve
if(e){const m={...ht},f=t.isRTL(s);t.setElementStyle(e,{top:"",left:"",right:"",bottom:""});const c=o.name===it,{offsetWidth:d,offsetHeight:h}=e,{clientWidth:E,clientHeight:C,offsetWidth:B}=t.getDocumentElement(s);let{placement:a}=l;const{clientWidth:T,offsetWidth:w}=n,S=t.getElementStyle(n,"position")==="fixed",p=Math.abs(S?T-w:E-B),x=f&&S?p:0,$=E-(f?0:p)-1,{width:g,height:b,left:u,right:gt,top:D}=t.getBoundingClientRect(s,!0),{x:G,y:k}={x:u,y:D};t.setElementStyle(r,{top:"",left:"",right:"",bottom:""});let A=0,I="",H=0,V="",q="",J="",X="";const N=r.offsetWidth||0,L=r.offsetHeight||0,Z=N/2;let F=D-h-L<0,_=D+h+b+L>=C,z=u-d-N<x,j=u+d+g+N>=$;const K=["left","right"],tt=["top","bottom"];F=K.includes(a)?D+b/2-h/2-L<0:F,_=K.includes(a)?D+h/2+b/2+L>=C:_,z=tt.includes(a)?u+g/2-d/2<x:z,j=tt.includes(a)?u+d/2+g/2>=$:j,a=K.includes(a)&&z&&j?"top":a,a=a==="top"&&F?"bottom":a,a=a==="bottom"&&_?"top":a,a=a==="left"&&z?"right":a,a=a==="right"&&j?"left":a,e.className.includes(a)||(e.className=e.className.replace(i,m[a]));// istanbul ignore else @preserve
K.includes(a)?(a==="left"?H=G-d-(c?N:0):H=G+g+(c?N:0),F&&_?(A=0,I=0,q=D+b/2-L/2):F?(A=k,I="",q=b/2-N):_?(A=k-h+b,I="",q=h-b/2-N):(A=k-h/2+b/2,q=h/2-L/2)):tt.includes(a)&&(a==="top"?A=k-h-(c?L:0):A=k+b+(c?L:0),z?(H=0,J=G+g/2-Z):j?(H="auto",V=0,X=g/2+$-gt-Z):(H=G-d/2+g/2,J=d/2-Z)),t.setElementStyle(e,{top:`${A}px`,bottom:I===""?"":`${I}px`,left:H==="auto"?H:`${H}px`,right:V!==""?`${V}px`:""});// istanbul ignore else @preserve
t.isHTMLElement(r)&&(q!==""&&(r.style.top=`${q}px`),J!==""?r.style.left=`${J}px`:X!==""&&(r.style.right=`${X}px`));const vt=t.createCustomEvent(`updated.bs.${t.toLowerCase(o.name)}`);t.dispatchEvent(s,vt)}},st={template:dt(y),title:"",customClass:"",trigger:"hover focus",placement:"top",sanitizeFn:void 0,animation:!0,delay:200,container:document.body,content:"",dismissible:!1,btnClose:""},pt="data-original-title",W="Tooltip",P=(o,i,s)=>{// istanbul ignore else @preserve
if(t.isString(i)&&i.length){let e=i.trim();t.isFunction(s)&&(e=s(e));const l=new DOMParser().parseFromString(e,"text/html");o.append(...l.body.childNodes)}else t.isHTMLElement(i)?o.append(i):(t.isNodeList(i)||t.isArray(i)&&i.every(t.isNode))&&o.append(...i)},wt=o=>{const i=o.name===W,{id:s,element:e,options:n}=o,{title:l,placement:r,template:m,animation:f,customClass:c,sanitizeFn:d,dismissible:h,content:E,btnClose:C}=n,B=i?y:Y,a={...ht};let T=[],w=[];t.isRTL(e)&&(a.left="end",a.right="start");const Q=`bs-${B}-${a[r]}`;let S;if(t.isHTMLElement(m))S=m;else{const x=t.createElement("div");P(x,m,d),S=x.firstChild}o.tooltip=t.isHTMLElement(S)?S.cloneNode(!0):void 0;const{tooltip:p}=o;// istanbul ignore else @preserve
if(p){t.setAttribute(p,"id",s),t.setAttribute(p,"role",y);const x=i?`${y}-inner`:`${Y}-body`,$=i?null:t.querySelector(`.${Y}-header`,p),g=t.querySelector(`.${x}`,p);o.arrow=t.querySelector(`.${B}-arrow`,p);const{arrow:b}=o;if(t.isHTMLElement(l))T=[l.cloneNode(!0)];else{const u=t.createElement("div");P(u,l,d),T=[...u.childNodes]}if(t.isHTMLElement(E))w=[E.cloneNode(!0)];else{const u=t.createElement("div");P(u,E,d),w=[...u.childNodes]}if(h)if(l)if(t.isHTMLElement(C))T=[...T,C.cloneNode(!0)];else{const u=t.createElement("div");P(u,C,d),T=[...T,u.firstChild]}else{// istanbul ignore else @preserve
if($&&$.remove(),t.isHTMLElement(C))w=[...w,C.cloneNode(!0)];else{const u=t.createElement("div");P(u,C,d),w=[...w,u.firstChild]}}// istanbul ignore else @preserve
if(i)l&&g&&P(g,l,d);else{// istanbul ignore else @preserve
l&&$&&P($,T,d);// istanbul ignore else @preserve
E&&g&&P(g,w,d),o.btn=t.querySelector(".btn-close",p)||void 0}t.addClass(p,"position-fixed"),t.addClass(b,"position-absolute");// istanbul ignore else @preserve
t.hasClass(p,B)||t.addClass(p,B);// istanbul ignore else @preserve
f&&!t.hasClass(p,nt.fadeClass)&&t.addClass(p,nt.fadeClass);// istanbul ignore else @preserve
c&&!t.hasClass(p,c)&&t.addClass(p,c);// istanbul ignore else @preserve
t.hasClass(p,Q)||t.addClass(p,Q)}},yt=o=>{const i=["HTML","BODY"],s=[];let{parentNode:e}=o;for(;e&&!i.includes(e.nodeName);){e=t.getParentNode(e);// istanbul ignore else @preserve
t.isShadowRoot(e)||t.isTableElement(e)||s.push(e)}return s.find((n,l)=>t.getElementStyle(n,"position")!=="relative"&&s.slice(l+1).every(r=>t.getElementStyle(r,"position")==="static")?n:null)||t.getDocument(o).body},$t=`[${Ct.dataBsToggle}="${y}"],[data-tip="${y}"]`,mt="title";let lt=o=>t.getInstance(o,W);const Ht=o=>new R(o),Lt=o=>{const{element:i,tooltip:s,container:e,offsetParent:n}=o;t.removeAttribute(i,t.ariaDescribedBy),M.removePopup(s,e===n?e:n)},U=o=>{const{tooltip:i,container:s,offsetParent:e}=o;return i&&M.hasPopup(i,s===e?s:e)},Pt=(o,i)=>{const{element:s}=o;o._toggleEventListeners();// istanbul ignore else @preserve
t.hasAttribute(s,pt)&&o.name===W&&ft(o);// istanbul ignore else @preserve
i&&i()},ut=(o,i)=>{const s=i?O.addListener:O.removeListener,{element:e}=o;s(t.getDocument(e),t.touchstartEvent,o.handleTouch,t.passiveHandler),[t.scrollEvent,t.resizeEvent].forEach(n=>{s(t.getWindow(e),n,o.update,t.passiveHandler)})},at=o=>{const{element:i}=o,s=t.createCustomEvent(`shown.bs.${t.toLowerCase(o.name)}`);ut(o,!0),t.dispatchEvent(i,s),t.Timer.clear(i,"in")},rt=o=>{const{element:i}=o,s=t.createCustomEvent(`hidden.bs.${t.toLowerCase(o.name)}`);ut(o),Lt(o),t.dispatchEvent(i,s),t.Timer.clear(i,"out")},ct=(o,i)=>{const s=i?O.addListener:O.removeListener,{element:e,container:n,offsetParent:l}=o,{offsetHeight:r,scrollHeight:m}=n,f=t.closest(e,`.${M.modalString}`),c=t.closest(e,`.${M.offcanvasString}`);// istanbul ignore else @preserve
const d=t.getWindow(e),E=n===l&&r!==m?n:d;s(E,t.resizeEvent,o.update,t.passiveHandler),s(E,t.scrollEvent,o.update,t.passiveHandler),f&&s(f,`hide.bs.${M.modalString}`,o.handleHide),c&&s(c,`hide.bs.${M.offcanvasString}`,o.handleHide)},ft=(o,i)=>{const s=[pt,mt],{element:e}=o;t.setAttribute(e,s[i?0:1],i||t.getAttribute(e,s[0])||""),t.removeAttribute(e,s[i?1:0])};class R extends Tt.BaseComponent{constructor(s,e){super(s,e);v(this,"handleFocus",()=>t.focus(this.element));v(this,"handleShow",()=>this.show());v(this,"handleHide",()=>this.hide());v(this,"update",()=>{ot(this)});v(this,"toggle",()=>{const{tooltip:s}=this;s&&!U(this)?this.show():this.hide()});v(this,"handleTouch",({target:s})=>{const{tooltip:e,element:n}=this;// istanbul ignore if @preserve
e&&e.contains(s)||s===n||s&&n.contains(s)||this.hide()});v(this,"_toggleEventListeners",s=>{const e=s?O.addListener:O.removeListener,{element:n,options:l,btn:r}=this,{trigger:m}=l,c=!!(this.name!==W&&l.dismissible);// istanbul ignore else @preserve
m.includes("manual")||(this.enabled=!!s,m.split(" ").forEach(h=>{// istanbul ignore else @preserve
if(h===t.mousehoverEvent){e(n,t.mousedownEvent,this.handleShow),e(n,t.mouseenterEvent,this.handleShow);// istanbul ignore else @preserve
c||(e(n,t.mouseleaveEvent,this.handleHide),e(t.getDocument(n),t.touchstartEvent,this.handleTouch,t.passiveHandler))}else if(h===t.mouseclickEvent)e(n,h,c?this.handleShow:this.toggle);else if(h===t.focusEvent){e(n,t.focusinEvent,this.handleShow);// istanbul ignore else @preserve
c||e(n,t.focusoutEvent,this.handleHide);// istanbul ignore else @preserve
t.isApple&&e(n,t.mouseclickEvent,this.handleFocus)}// istanbul ignore else @preserve
c&&r&&e(r,t.mouseclickEvent,this.handleHide)}))});const{element:n}=this,l=this.name===W,r=l?y:Y,m=l?W:it;// istanbul ignore next @preserve: this is to set Popover too
lt=c=>t.getInstance(c,m),this.enabled=!0,this.id=`${r}-${t.getUID(n,r)}`;const{options:f}=this;if(!(!f.title&&l||!l&&!f.content)){t.ObjectAssign(st,{titleAttr:""});// istanbul ignore else @preserve
t.hasAttribute(n,mt)&&l&&typeof f.title=="string"&&ft(this,f.title),this.container=yt(n),this.offsetParent=["sticky","fixed"].some(c=>t.getElementStyle(this.container,"position")===c)?this.container:t.getDocument(this.element).body,wt(this),this._toggleEventListeners(!0)}}get name(){return W}get defaults(){return st}show(){const{options:s,tooltip:e,element:n,container:l,offsetParent:r,id:m}=this,{animation:f}=s,c=t.Timer.get(n,"out"),d=l===r?l:r;t.Timer.clear(n,"out"),e&&!c&&!U(this)&&t.Timer.set(n,()=>{const h=t.createCustomEvent(`show.bs.${t.toLowerCase(this.name)}`);t.dispatchEvent(n,h);// istanbul ignore else @preserve
if(!h.defaultPrevented){M.appendPopup(e,d),t.setAttribute(n,t.ariaDescribedBy,`#${m}`),this.update(),ct(this,!0);// istanbul ignore else @preserve
t.hasClass(e,et.showClass)||t.addClass(e,et.showClass);// istanbul ignore else @preserve
f?t.emulateTransitionEnd(e,()=>at(this)):at(this)}},17,"in")}hide(){const{options:s,tooltip:e,element:n}=this,{animation:l,delay:r}=s;t.Timer.clear(n,"in");// istanbul ignore else @preserve
e&&U(this)&&t.Timer.set(n,()=>{const m=t.createCustomEvent(`hide.bs.${t.toLowerCase(this.name)}`);t.dispatchEvent(n,m);// istanbul ignore else @preserve
if(!m.defaultPrevented){this.update(),t.removeClass(e,et.showClass),ct(this);// istanbul ignore else @preserve
l?t.emulateTransitionEnd(e,()=>rt(this)):rt(this)}},r+17,"out")}enable(){const{enabled:s}=this;// istanbul ignore else @preserve
s||(this._toggleEventListeners(!0),this.enabled=!s)}disable(){const{tooltip:s,enabled:e}=this;// istanbul ignore else @preserve
e&&(s&&U(this)&&this.hide(),this._toggleEventListeners(),this.enabled=!e)}toggleEnabled(){this.enabled?this.disable():this.enable()}dispose(){const{tooltip:s,options:e}=this,n={...this,name:this.name},l=()=>setTimeout(()=>Pt(n,()=>super.dispose()),17);e.animation&&U(n)?(this.options.delay=0,this.hide(),t.emulateTransitionEnd(s,l)):l()}}v(R,"selector",$t),v(R,"init",Ht),v(R,"getInstance",lt),v(R,"styleTip",ot);exports.Tooltip=R;exports.getTipTemplate=dt;exports.popoverComponent=it;exports.popoverString=Y;exports.styleTip=ot;exports.tooltipDefaults=st;
//# sourceMappingURL=tooltip-kta4uOnb.js.map
