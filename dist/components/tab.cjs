"use strict";const t=require("./base-component-DaZCwW-u.js"),m=require("./event-listener-BQdA_KAC.js"),v=require("./collapsingClass-CLblascz.js"),c=require("./activeClass-CxJYQAGN.js"),h=require("./fadeClass-Co6nOzNJ.js"),u=require("./showClass-D_Ms1FgG.js"),T=require("./dropdownClasses-CnEyz_iw.js"),P=require("./dataBsToggle-Dj-Ng54N.js"),p=require("./getTargetElement-CXAsWuzD.js"),f="tab",k="Tab",q=`[${P.dataBsToggle}="${f}"]`,L=o=>t.to(o,k),B=o=>new M(o),C=t.vo(`show.bs.${f}`),E=t.vo(`shown.bs.${f}`),b=t.vo(`hide.bs.${f}`),H=t.vo(`hidden.bs.${f}`),d=new Map,Y=o=>{const{tabContent:n,nav:e}=o;n&&t.Yn(n,v.collapsingClass)&&(n.style.height="",t.Zn(n,v.collapsingClass)),e&&t.yo.clear(e)},x=o=>{const{element:n,tabContent:e,content:s,nav:l}=o,{tab:a}=t.m(l)&&d.get(l)||{tab:null};if(e&&s&&t.Yn(s,h.fadeClass)){const{currentHeight:i,nextHeight:r}=d.get(n)||{currentHeight:0,nextHeight:0};i!==r?setTimeout(()=>{e.style.height=`${r}px`,t.Eo(e),t.ro(e,()=>Y(o))},50):Y(o)}else l&&t.yo.clear(l);E.relatedTarget=a,t.q(n,E)},$=o=>{const{element:n,content:e,tabContent:s,nav:l}=o,{tab:a,content:i}=l&&d.get(l)||{tab:null,content:null};let r=0;if(s&&e&&t.Yn(e,h.fadeClass)&&([i,e].forEach(g=>{g&&t.qn(g,"overflow-hidden")}),r=i?i.scrollHeight:0),C.relatedTarget=a,H.relatedTarget=n,t.q(n,C),!C.defaultPrevented){if(e&&t.qn(e,c.activeClass),i&&t.Zn(i,c.activeClass),s&&e&&t.Yn(e,h.fadeClass)){const g=e.scrollHeight;d.set(n,{currentHeight:r,nextHeight:g,tab:null,content:null}),t.qn(s,v.collapsingClass),s.style.height=`${r}px`,t.Eo(s),[i,e].forEach(w=>{w&&t.Zn(w,"overflow-hidden")})}e&&e&&t.Yn(e,h.fadeClass)?setTimeout(()=>{t.qn(e,u.showClass),t.ro(e,()=>{x(o)})},1):(e&&t.qn(e,u.showClass),x(o)),a&&t.q(a,H)}},y=o=>{const{nav:n}=o;if(!t.m(n))return{tab:null,content:null};const e=t.Go(c.activeClass,n);let s=null;e.length===1&&!T.dropdownMenuClasses.some(a=>t.Yn(e[0].parentElement,a))?[s]=e:e.length>1&&(s=e[e.length-1]);const l=t.m(s)?p.getTargetElement(s):null;return{tab:s,content:l}},Z=o=>{if(!t.m(o))return null;const n=t.ke(o,`.${T.dropdownMenuClasses.join(",.")}`);return n?t.Ro(`.${T.dropdownMenuClasses[0]}-toggle`,n):null},D=o=>{const n=L(o.target);o.preventDefault(),n&&n.show()};class M extends t.BaseComponent{static selector=q;static init=B;static getInstance=L;constructor(n){super(n);const{element:e}=this,s=p.getTargetElement(e);if(!s)return;const l=t.ke(e,".nav"),a=t.ke(s,".tab-content");this.nav=l,this.content=s,this.tabContent=a,this.dropdown=Z(e);const{tab:i}=y(this);if(l&&!i){const r=t.Ro(q,l),g=r&&p.getTargetElement(r);g&&(t.qn(r,c.activeClass),t.qn(g,u.showClass),t.qn(g,c.activeClass),t.Qn(e,t.Fe,"true"))}this._toggleEventListeners(!0)}get name(){return k}show(){const{element:n,content:e,nav:s,dropdown:l}=this;if(s&&t.yo.get(s)||t.Yn(n,c.activeClass))return;const{tab:a,content:i}=y(this);if(s&&a&&d.set(s,{tab:a,content:i,currentHeight:0,nextHeight:0}),b.relatedTarget=n,!t.m(a)||(t.q(a,b),b.defaultPrevented))return;t.qn(n,c.activeClass),t.Qn(n,t.Fe,"true");const r=t.m(a)&&Z(a);if(r&&t.Yn(r,c.activeClass)&&t.Zn(r,c.activeClass),s){const g=()=>{a&&(t.Zn(a,c.activeClass),t.Qn(a,t.Fe,"false")),l&&!t.Yn(l,c.activeClass)&&t.qn(l,c.activeClass)};i&&(t.Yn(i,h.fadeClass)||e&&t.Yn(e,h.fadeClass))?t.yo.set(s,g,1):g()}i&&(t.Zn(i,u.showClass),t.Yn(i,h.fadeClass)?t.ro(i,()=>$(this)):$(this))}_toggleEventListeners=n=>{(n?m.E:m.r)(this.element,t.mt,D)};dispose(){this._toggleEventListeners(),super.dispose()}}module.exports=M;
//# sourceMappingURL=tab.cjs.map
