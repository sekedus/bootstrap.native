"use strict";const t=require("./base-component-CEXwoid1.js"),v=require("./collapsingClass-CLblascz.js"),c=require("./activeClass-CxJYQAGN.js"),h=require("./fadeClass-Co6nOzNJ.js"),u=require("./showClass-D_Ms1FgG.js"),m=require("./dropdownClasses-CnEyz_iw.js"),y=require("./dataBsToggle-Dj-Ng54N.js"),T=require("./getTargetElement-BJtPWRez.js"),f="tab",Y="Tab",p=`[${y.dataBsToggle}="${f}"]`,M=o=>t.to(o,Y),B=o=>new P(o),C=t.mo(`show.bs.${f}`),q=t.mo(`shown.bs.${f}`),b=t.mo(`hide.bs.${f}`),E=t.mo(`hidden.bs.${f}`),d=new Map,H=o=>{const{tabContent:n,nav:e}=o;n&&t.Zn(n,v.collapsingClass)&&(n.style.height="",t.Yn(n,v.collapsingClass)),e&&t.ho.clear(e)},Z=o=>{const{element:n,tabContent:e,content:s,nav:l}=o,{tab:a}=t.m(l)&&d.get(l)||{tab:null};if(e&&s&&t.Zn(s,h.fadeClass)){const{currentHeight:i,nextHeight:r}=d.get(n)||{currentHeight:0,nextHeight:0};i!==r?setTimeout(()=>{e.style.height=`${r}px`,t.bo(e),t.so(e,()=>H(o))},50):H(o)}else l&&t.ho.clear(l);q.relatedTarget=a,t.q(n,q)},x=o=>{const{element:n,content:e,tabContent:s,nav:l}=o,{tab:a,content:i}=l&&d.get(l)||{tab:null,content:null};let r=0;if(s&&e&&t.Zn(e,h.fadeClass)&&([i,e].forEach(g=>{g&&t.qn(g,"overflow-hidden")}),r=i?i.scrollHeight:0),C.relatedTarget=a,E.relatedTarget=n,t.q(n,C),!C.defaultPrevented){if(e&&t.qn(e,c.activeClass),i&&t.Yn(i,c.activeClass),s&&e&&t.Zn(e,h.fadeClass)){const g=e.scrollHeight;d.set(n,{currentHeight:r,nextHeight:g,tab:null,content:null}),t.qn(s,v.collapsingClass),s.style.height=`${r}px`,t.bo(s),[i,e].forEach(w=>{w&&t.Yn(w,"overflow-hidden")})}e&&e&&t.Zn(e,h.fadeClass)?setTimeout(()=>{t.qn(e,u.showClass),t.so(e,()=>{Z(o)})},1):(e&&t.qn(e,u.showClass),Z(o)),a&&t.q(a,E)}},$=o=>{const{nav:n}=o;if(!t.m(n))return{tab:null,content:null};const e=t.Go(c.activeClass,n);let s=null;e.length===1&&!m.dropdownMenuClasses.some(a=>t.Zn(e[0].parentElement,a))?[s]=e:e.length>1&&(s=e[e.length-1]);const l=t.m(s)?T.getTargetElement(s):null;return{tab:s,content:l}},k=o=>{if(!t.m(o))return null;const n=t.ke(o,`.${m.dropdownMenuClasses.join(",.")}`);return n?t.Ro(`.${m.dropdownMenuClasses[0]}-toggle`,n):null},D=o=>{const n=t.ke(o.target,p),e=n&&M(n);e&&(o.preventDefault(),e.show())};class P extends t.BaseComponent{static selector=p;static init=B;static getInstance=M;constructor(n){super(n);const{element:e}=this,s=T.getTargetElement(e);if(!s)return;const l=t.ke(e,".nav"),a=t.ke(s,".tab-content");this.nav=l,this.content=s,this.tabContent=a,this.dropdown=k(e);const{tab:i}=$(this);if(l&&!i){const r=t.Ro(p,l),g=r&&T.getTargetElement(r);g&&(t.qn(r,c.activeClass),t.qn(g,u.showClass),t.qn(g,c.activeClass),t.Qn(e,t.Fe,"true"))}this._toggleEventListeners(!0)}get name(){return Y}show(){const{element:n,content:e,nav:s,dropdown:l}=this;if(s&&t.ho.get(s)||t.Zn(n,c.activeClass))return;const{tab:a,content:i}=$(this);if(s&&a&&d.set(s,{tab:a,content:i,currentHeight:0,nextHeight:0}),b.relatedTarget=n,!t.m(a)||(t.q(a,b),b.defaultPrevented))return;t.qn(n,c.activeClass),t.Qn(n,t.Fe,"true");const r=t.m(a)&&k(a);if(r&&t.Zn(r,c.activeClass)&&t.Yn(r,c.activeClass),s){const g=()=>{a&&(t.Yn(a,c.activeClass),t.Qn(a,t.Fe,"false")),l&&!t.Zn(l,c.activeClass)&&t.qn(l,c.activeClass)};i&&(t.Zn(i,h.fadeClass)||e&&t.Zn(e,h.fadeClass))?t.ho.set(s,g,1):g()}i&&(t.Yn(i,u.showClass),t.Zn(i,h.fadeClass)?t.so(i,()=>x(this)):x(this))}_toggleEventListeners=n=>{(n?t.E:t.r)(this.element,t.vt,D)};dispose(){this._toggleEventListeners(),super.dispose()}}module.exports=P;
//# sourceMappingURL=tab.cjs.map
