"use strict";const t=require("./base-component-2e8b2d4a.cjs"),m=require("./event-listener-09f2aa63.cjs"),v=require("./collapsingClass-889bd3db.cjs"),r=require("./activeClass-a1284579.cjs"),d=require("./fadeClass-a4944cf1.cjs"),C=require("./showClass-2174a6d6.cjs"),T=require("./dropdownClasses-c131c53f.cjs"),G=require("./dataBsToggle-c8bc9e7f.cjs"),p=require("./getTargetElement-3f39cec8.cjs"),h="tab",Q="Tab",k=`[${G.dataBsToggle}="${h}"]`,S=a=>t.Ln(a,Q),P=a=>new B(a),f=t.Wn(`show.bs.${h}`),E=t.Wn(`shown.bs.${h}`),b=t.Wn(`hide.bs.${h}`),M=t.Wn(`hidden.bs.${h}`),u=new Map,H=a=>{const{tabContent:n,nav:e}=a;n&&t.kn(n,v.collapsingClass)&&(n.style.height="",t.Nn(n,v.collapsingClass)),e&&t.Gn.clear(e)},x=a=>{const{element:n,tabContent:e,content:s,nav:i}=a,{tab:o}=t.u(i)&&u.get(i)||{tab:null};if(e&&s&&t.kn(s,d.fadeClass)){const{currentHeight:l,nextHeight:c}=u.get(n)||{currentHeight:0,nextHeight:0};l===c?H(a):setTimeout(()=>{e.style.height=`${c}px`,t.Qn(e),t.zn(e,()=>H(a))},50)}else i&&t.Gn.clear(i);E.relatedTarget=o,t.Q(n,E)},j=a=>{const{element:n,content:e,tabContent:s,nav:i}=a,{tab:o,content:l}=i&&u.get(i)||{tab:null,content:null};let c=0;if(s&&e&&t.kn(e,d.fadeClass)&&([l,e].forEach(g=>{t.u(g)&&t.Mn(g,"overflow-hidden")}),c=t.u(l)?l.scrollHeight:0),f.relatedTarget=o,M.relatedTarget=n,t.Q(n,f),!f.defaultPrevented){if(e&&t.Mn(e,r.activeClass),l&&t.Nn(l,r.activeClass),s&&e&&t.kn(e,d.fadeClass)){const g=e.scrollHeight;u.set(n,{currentHeight:c,nextHeight:g,tab:null,content:null}),t.Mn(s,v.collapsingClass),s.style.height=`${c}px`,t.Qn(s),[l,e].forEach(w=>{w&&t.Nn(w,"overflow-hidden")})}e&&e&&t.kn(e,d.fadeClass)?setTimeout(()=>{t.Mn(e,C.showClass),t.zn(e,()=>{x(a)})},1):(e&&t.Mn(e,C.showClass),x(a)),o&&t.Q(o,M)}},$=a=>{const{nav:n}=a;if(!t.u(n))return{tab:null,content:null};const e=t.ho(r.activeClass,n);let s=null;e.length===1&&!T.dropdownMenuClasses.some(o=>t.kn(e[0].parentElement,o))?[s]=e:e.length>1&&(s=e[e.length-1]);const i=t.u(s)?p.getTargetElement(s):null;return{tab:s,content:i}},q=a=>{if(!t.u(a))return null;const n=t.de(a,`.${T.dropdownMenuClasses.join(",.")}`);return n?t.go(`.${T.dropdownMenuClasses[0]}-toggle`,n):null},N=(a,n)=>{(n?m.E:m.d)(a.element,t.ut,W)},W=a=>{const n=S(a.target);!n||(a.preventDefault(),n.show())};class B extends t.BaseComponent{static selector=k;static init=P;static getInstance=S;constructor(n){super(n);const{element:e}=this,s=p.getTargetElement(e);if(!s)return;const i=t.de(e,".nav"),o=t.de(s,".tab-content");this.nav=i,this.content=s,this.tabContent=o,this.dropdown=q(e);const{tab:l}=$(this);if(i&&!l){const c=t.go(k,i),g=c&&p.getTargetElement(c);g&&(t.Mn(c,r.activeClass),t.Mn(g,C.showClass),t.Mn(g,r.activeClass),t.F(e,t.Se,"true"))}N(this,!0)}get name(){return Q}show(){const{element:n,content:e,nav:s,dropdown:i}=this;if(!(s&&t.Gn.get(s))&&!t.kn(n,r.activeClass)){const{tab:o,content:l}=$(this);if(s&&u.set(s,{tab:o,content:l,currentHeight:0,nextHeight:0}),b.relatedTarget=n,t.u(o)&&t.Q(o,b),b.defaultPrevented)return;t.Mn(n,r.activeClass),t.F(n,t.Se,"true");const c=t.u(o)&&q(o);if(c&&t.kn(c,r.activeClass)&&t.Nn(c,r.activeClass),s){const g=()=>{o&&(t.Nn(o,r.activeClass),t.F(o,t.Se,"false")),i&&!t.kn(i,r.activeClass)&&t.Mn(i,r.activeClass)};l&&(t.kn(l,d.fadeClass)||e&&t.kn(e,d.fadeClass))?t.Gn.set(s,g,1):g()}l&&(t.Nn(l,C.showClass),t.kn(l,d.fadeClass)?t.zn(l,()=>j(this)):j(this))}}dispose(){N(this),super.dispose()}}module.exports=B;
//# sourceMappingURL=tab.cjs.map
