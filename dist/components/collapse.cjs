"use strict";const e=require("./base-component-D3rSrWwH.js"),d=require("./event-listener-W3RGkfJ6.js"),T=require("./dataBsToggle-Dj-Ng54N.js"),g=require("./collapsingClass-CLblascz.js"),p=require("./showClass-D_Ms1FgG.js"),h=require("./getTargetElement-DOtJ4BXO.js"),o="collapse",u="Collapse",$=`.${o}`,f=`[${T.dataBsToggle}="${o}"]`,w={parent:null},c=a=>e.getInstance(a,u),S=a=>new v(a),m=e.createCustomEvent(`show.bs.${o}`),q=e.createCustomEvent(`shown.bs.${o}`),C=e.createCustomEvent(`hide.bs.${o}`),b=e.createCustomEvent(`hidden.bs.${o}`),x=a=>{const{element:t,parent:s,triggers:l}=a;e.dispatchEvent(t,m),m.defaultPrevented||(e.Timer.set(t,e.noop,17),s&&e.Timer.set(s,e.noop,17),e.addClass(t,g.collapsingClass),e.removeClass(t,o),e.setElementStyle(t,{height:`${t.scrollHeight}px`}),e.emulateTransitionEnd(t,()=>{e.Timer.clear(t),s&&e.Timer.clear(s),l.forEach(n=>e.setAttribute(n,e.ariaExpanded,"true")),e.removeClass(t,g.collapsingClass),e.addClass(t,o),e.addClass(t,p.showClass),e.setElementStyle(t,{height:""}),e.dispatchEvent(t,q)}))},E=a=>{const{element:t,parent:s,triggers:l}=a;e.dispatchEvent(t,C),C.defaultPrevented||(e.Timer.set(t,e.noop,17),s&&e.Timer.set(s,e.noop,17),e.setElementStyle(t,{height:`${t.scrollHeight}px`}),e.removeClass(t,o),e.removeClass(t,p.showClass),e.addClass(t,g.collapsingClass),e.reflow(t),e.setElementStyle(t,{height:"0px"}),e.emulateTransitionEnd(t,()=>{e.Timer.clear(t),s&&e.Timer.clear(s),l.forEach(n=>e.setAttribute(n,e.ariaExpanded,"false")),e.removeClass(t,g.collapsingClass),e.addClass(t,o),e.setElementStyle(t,{height:""}),e.dispatchEvent(t,b)}))},y=a=>{const{target:t}=a,s=t&&e.closest(t,f),l=s&&h.getTargetElement(s),n=l&&c(l);n&&n.toggle(),s&&s.tagName==="A"&&a.preventDefault()};class v extends e.BaseComponent{static selector=$;static init=S;static getInstance=c;constructor(t,s){super(t,s);const{element:l,options:n}=this,r=e.getDocument(l);this.triggers=[...e.querySelectorAll(f,r)].filter(i=>h.getTargetElement(i)===l),this.parent=e.isHTMLElement(n.parent)?n.parent:e.isString(n.parent)?h.getTargetElement(l)||e.querySelector(n.parent,r):null,this._toggleEventListeners(!0)}get name(){return u}get defaults(){return w}hide(){const{triggers:t,element:s}=this;e.Timer.get(s)||(E(this),t.length&&t.forEach(l=>e.addClass(l,`${o}d`)))}show(){const{element:t,parent:s,triggers:l}=this;let n,r;s&&(n=[...e.querySelectorAll(`.${o}.${p.showClass}`,s)].find(i=>c(i)),r=n&&c(n)),(!s||!e.Timer.get(s))&&!e.Timer.get(t)&&(r&&n!==t&&(E(r),r.triggers.forEach(i=>{e.addClass(i,`${o}d`)})),x(this),l.length&&l.forEach(i=>e.removeClass(i,`${o}d`)))}toggle(){e.hasClass(this.element,p.showClass)?this.hide():this.show()}_toggleEventListeners=t=>{const s=t?d.E:d.r,{triggers:l}=this;l.length&&l.forEach(n=>s(n,e.mouseclickEvent,y))};dispose(){this._toggleEventListeners(),super.dispose()}}module.exports=v;
//# sourceMappingURL=collapse.cjs.map
