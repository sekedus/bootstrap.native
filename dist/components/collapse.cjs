"use strict";var w=Object.defineProperty;var S=(l,t,s)=>t in l?w(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var g=(l,t,s)=>(S(l,typeof t!="symbol"?t+"":t,s),s);const e=require("@thednp/shorty"),E=require("@thednp/event-listener"),q=require("./dataBsToggle-c8bc9e7f.js"),d=require("./collapsingClass-889bd3db.js"),m=require("./showClass-2174a6d6.js"),C=require("./getTargetElement-93cf2bb8.js"),y=require("./base-component-f3cef043.js"),a="collapse",T="Collapse",b=`.${a}`,$=`[${q.dataBsToggle}="${a}"]`,x={parent:null},p=l=>e.getInstance(l,T),L=l=>new h(l),u=e.createCustomEvent(`show.bs.${a}`),A=e.createCustomEvent(`shown.bs.${a}`),f=e.createCustomEvent(`hide.bs.${a}`),I=e.createCustomEvent(`hidden.bs.${a}`),H=l=>{const{element:t,parent:s,triggers:o}=l;e.dispatchEvent(t,u),u.defaultPrevented||(e.Timer.set(t,e.noop,17),s&&e.Timer.set(s,e.noop,17),e.addClass(t,d.collapsingClass),e.removeClass(t,a),e.setElementStyle(t,{height:`${t.scrollHeight}px`}),e.emulateTransitionEnd(t,()=>{e.Timer.clear(t),s&&e.Timer.clear(s),o.forEach(n=>e.setAttribute(n,e.ariaExpanded,"true")),e.removeClass(t,d.collapsingClass),e.addClass(t,a),e.addClass(t,m.showClass),e.setElementStyle(t,{height:""}),e.dispatchEvent(t,A)}))},v=l=>{const{element:t,parent:s,triggers:o}=l;e.dispatchEvent(t,f),f.defaultPrevented||(e.Timer.set(t,e.noop,17),s&&e.Timer.set(s,e.noop,17),e.setElementStyle(t,{height:`${t.scrollHeight}px`}),e.removeClass(t,a),e.removeClass(t,m.showClass),e.addClass(t,d.collapsingClass),e.reflow(t),e.setElementStyle(t,{height:"0px"}),e.emulateTransitionEnd(t,()=>{e.Timer.clear(t),s&&e.Timer.clear(s),o.forEach(n=>e.setAttribute(n,e.ariaExpanded,"false")),e.removeClass(t,d.collapsingClass),e.addClass(t,a),e.setElementStyle(t,{height:""}),e.dispatchEvent(t,I)}))},k=l=>{const{target:t}=l,s=t&&e.closest(t,$),o=s&&C.getTargetElement(s),n=o&&p(o);n&&n.toggle(),s&&s.tagName==="A"&&l.preventDefault()};class h extends y.BaseComponent{constructor(s,o){super(s,o);g(this,"_toggleEventListeners",s=>{const o=s?E.addListener:E.removeListener,{triggers:n}=this;n.length&&n.forEach(r=>o(r,e.mouseclickEvent,k))});const{element:n,options:r}=this,i=e.getDocument(n);this.triggers=[...e.querySelectorAll($,i)].filter(c=>C.getTargetElement(c)===n),this.parent=e.isHTMLElement(r.parent)?r.parent:e.isString(r.parent)?C.getTargetElement(n)||e.querySelector(r.parent,i):null,this._toggleEventListeners(!0)}get name(){return T}get defaults(){return x}hide(){const{triggers:s,element:o}=this;e.Timer.get(o)||(v(this),s.length&&s.forEach(n=>e.addClass(n,`${a}d`)))}show(){const{element:s,parent:o,triggers:n}=this;let r,i;o&&(r=[...e.querySelectorAll(`.${a}.${m.showClass}`,o)].find(c=>p(c)),i=r&&p(r)),(!o||!e.Timer.get(o))&&!e.Timer.get(s)&&(i&&r!==s&&(v(i),i.triggers.forEach(c=>{e.addClass(c,`${a}d`)})),H(this),n.length&&n.forEach(c=>e.removeClass(c,`${a}d`)))}toggle(){e.hasClass(this.element,m.showClass)?this.hide():this.show()}dispose(){this._toggleEventListeners(),super.dispose()}}g(h,"selector",b),g(h,"init",L),g(h,"getInstance",p);module.exports=h;
//# sourceMappingURL=collapse.cjs.map
