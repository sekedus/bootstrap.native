"use strict";const e=require("./shorty-1329a513.cjs"),S=require("./event-listener-2a5f29ed.cjs"),g=require("./activeClass-a1284579.cjs"),T=require("./base-component.cjs"),k="scrollspy",I="ScrollSpy",b='[data-bs-spy="scroll"]',w={offset:10,target:null},L=t=>e.Ln(t,I),x=t=>new E(t),d=e.Wn(`activate.bs.${k}`),q=t=>{const{target:s,scrollTarget:n,options:r,itemsLength:i,scrollHeight:o,element:a}=t,{offset:c}=r,l=e.W(n),h=s&&e.pe("A",s),f=n&&A(n);if(t.scrollTop=l?n.scrollY:n.scrollTop,h&&(i!==h.length||f!==o)){let p,u,m;t.items=[],t.offsets=[],t.scrollHeight=f,t.maxScroll=t.scrollHeight-W(t),[...h].forEach(v=>{p=e.Zt(v,"href"),u=p&&p.charAt(0)==="#"&&p.slice(-1)!=="#"&&e.go(p,e.d(a)),u&&(t.items.push(v),m=e.w(u),t.offsets.push((l?m.top+t.scrollTop:u.offsetTop)-c))}),t.itemsLength=t.items.length}},A=t=>e.u(t)?t.scrollHeight:e.k(t).scrollHeight,W=({element:t,scrollTarget:s})=>e.W(s)?s.innerHeight:e.w(t).height,C=t=>{[...e.pe("A",t)].forEach(s=>{e.kn(s,g.activeClass)&&e.Nn(s,g.activeClass)})},y=(t,s)=>{const{target:n,element:r}=t;e.u(n)&&C(n),t.activeItem=s,e.Mn(s,g.activeClass);const i=[];let o=s;for(;o!==e.Jn(r);)o=o.parentElement,(e.kn(o,"nav")||e.kn(o,"dropdown-menu"))&&i.push(o);i.forEach(a=>{const c=a.previousElementSibling;c&&!e.kn(c,g.activeClass)&&e.Mn(c,g.activeClass)}),d.relatedTarget=s,e.Q(r,d)},H=(t,s)=>{(s?S.E:S.r)(t.scrollTarget,e.xt,t.refresh,e.Rn)};class E extends T{static selector=b;static init=x;static getInstance=L;constructor(s,n){super(s,n);const{element:r,options:i}=this;this.target=e.go(i.target,e.d(r)),this.target&&(this.scrollTarget=r.clientHeight<r.scrollHeight?r:e.$n(r),this.refresh=this.refresh.bind(this),H(this,!0),this.refresh())}get name(){return I}get defaults(){return w}refresh(){const{target:s}=this;if(s?.offsetHeight===0)return;q(this);const{scrollTop:n,maxScroll:r,itemsLength:i,items:o,activeItem:a}=this;if(n>=r){const l=o[i-1];a!==l&&y(this,l);return}const{offsets:c}=this;if(a&&n<c[0]&&c[0]>0){this.activeItem=null,e.u(s)&&C(s);return}o.forEach((l,h)=>{a!==l&&n>=c[h]&&(typeof c[h+1]>"u"||n<c[h+1])&&y(this,l)})}dispose(){H(this),super.dispose()}}module.exports=E;
//# sourceMappingURL=scrollspy.cjs.map
